/*
 KeymanWeb 2.0 (C) 2012 Tavultesoft Pty Ltd
*/
String.kmwFromCharCode=function(a){var b=[],c;for(c=0;c<arguments.length;c++){var d=Number(arguments[c]);if(!isFinite(d)||0>d||1114111<d||Math.floor(d)!==d)throw new RangeError("Invalid code point "+d);65536>d?b.push(d):(d-=65536,b.push((d>>10)+55296),b.push(d%1024+56320))}return String.fromCharCode.apply(void 0,b)};
String.prototype.kmwCharCodeAt=function(a){var b=""+this,c=0;if(0>a||a>=b.length)return NaN;for(var d=0;d<a;d++)if(c=b.kmwNextChar(c),null===c)return NaN;a=b.charCodeAt(c);return 55296<=a&&(56319>=a&&b.length>c+1)&&(b=b.charCodeAt(c+1),56320<=b&&57343>=b)?(a-55296<<10)+(b-56320)+65536:a};String.prototype.kmwIndexOf=function(a,b){var c=""+this,d=c.indexOf(a,b);if(0>d)return d;for(var e=0,f=0;null!==f&&f<d;f=c.kmwNextChar(f))e++;return e};
String.prototype.kmwLastIndexOf=function(a,b){var c=""+this,d=c.lastIndexOf(a,b);if(0>d)return d;for(var e=0,f=0;null!==f&&f<d;f=c.kmwNextChar(f))e++;return e};String.prototype.kmwLength=function(){var a=""+this;if(0==a.length)return 0;for(var b=0,c=0;null!==c;b++)c=a.kmwNextChar(c);return b};String.prototype.kmwSlice=function(a,b){var c=""+this,d=c.kmwCodePointToCodeUnit(a),e=c.kmwCodePointToCodeUnit(b);return null===d||null===e?"":c.slice(d,e)};
String.prototype.kmwSubstr=function(a,b){var c=""+this;0>a&&(a=c.kmwLength()+a);0>a&&(a=0);var d=c.kmwCodePointToCodeUnit(a),e=d;if(null===d)return"";if(2>arguments.length)e=c.length;else for(var f=0;f<b;f++)e=c.kmwNextChar(e);return null===e?c.substring(d):c.substring(d,e)};
String.prototype.kmwSubstring=function(a,b){var c=""+this,d,e;"undefined"==typeof b?(d=c.kmwCodePointToCodeUnit(a),e=c.length):(a>b&&(d=a,a=b,b=d),d=c.kmwCodePointToCodeUnit(a),e=c.kmwCodePointToCodeUnit(b));if(isNaN(d)||null===d)d=0;if(isNaN(e)||null===e)e=c.length;return c.substring(d,e)};
String.prototype.kmwNextChar=function(a){var b=""+this;if(null===a||0>a||a>=b.length-1)return null;var c=b.charCodeAt(a);return 55296<=c&&(56319>=c&&b.length>a+1)&&(c=b.charCodeAt(a+1),56320<=c&&57343>=c)?a==b.length-2?null:a+2:a+1};String.prototype.kmwPrevChar=function(a){var b=""+this;if(null==a||0>=a||a>b.length)return null;var c=b.charCodeAt(a-1);return 56320<=c&&(57343>=c&&1<a)&&(b=b.charCodeAt(a-2),55296<=b&&56319>=b)?a-2:a-1};
String.prototype.kmwCodePointToCodeUnit=function(a){if(null===a)return null;var b=""+this,c=0;if(0>a){for(var c=b.length,d=0;d>a;d--)c=b.kmwPrevChar(c);return c}if(a==b.kmwLength())return b.length;for(d=0;d<a;d++)c=b.kmwNextChar(c);return c};String.prototype.kmwCodeUnitToCodePoint=function(a){var b=""+this;return null===a?null:0==a?0:0>a?b.substr(a).kmwLength():b.substr(0,a).kmwLength()};String.prototype.kmwCharAt=function(a){return 0<=a?(""+this).kmwSubstr(a,1):""};
String.prototype.kmwBMPNextChar=function(a){return 0>a||a>=(""+this).length-1?void 0:a+1};String.prototype.kmwBMPPrevChar=function(a){return 0>=a||a>(""+this).length?void 0:a-1};String.prototype.kmwBMPCodePointToCodeUnit=function(a){return a};String.prototype.kmwBMPCodeUnitToCodePoint=function(a){return a};String.prototype.kmwBMPLength=function(){return(""+this).length};String.prototype.kmwBMPSubstr=function(a,b){var c=""+this;return-1<a?c.substr(a,b):c.substr(c.length+a,-a)};
String.kmwEnableSupplementaryPlane=function(a){var b=String.prototype;String._kmwFromCharCode=a?String.kmwFromCharCode:String.fromCharCode;b._kmwCharAt=a?b.kmwCharAt:b.charAt;b._kmwCharCodeAt=a?b.kmwCharCodeAt:b.charCodeAt;b._kmwIndexOf=a?b.kmwIndexOf:b.indexOf;b._kmwLastIndexOf=a?b.kmwLastIndexOf:b.lastIndexOf;b._kmwSlice=a?b.kmwSlice:b.slice;b._kmwSubstring=a?b.kmwSubstring:b.substring;b._kmwSubstr=a?b.kmwSubstr:b.kmwBMPSubstr;b._kmwLength=a?b.kmwLength:b.kmwBMPLength;b._kmwNextChar=a?b.kmwNextChar:
b.kmwBMPNextChar;b._kmwPrevChar=a?b.kmwPrevChar:b.kmwBMPPrevChar;b._kmwCodePointToCodeUnit=a?b.kmwCodePointToCodeUnit:b.kmwBMPCodePointToCodeUnit;b._kmwCodeUnitToCodePoint=a?b.kmwCodeUnitToCodePoint:b.kmwBMPCodeUnitToCodePoint};
/*
 KeymanWeb 2.0 Copyright 2010 Tavultesoft Pty Ltd
*/
var __BUILD__=360;
(function(){var b=(window.tavultesoft={}).keymanweb={_TitleElement:null,_Enabled:1,_IE:0,legacy:0,_IsActivatingKeymanWebUI:0,_JustActivatedKeymanWebUI:0,_IgnoreNextSelChange:0,_Selection:null,_SelectionControl:null,_KeyboardStubs:[],dfltStub:null,_Keyboards:[],_ActiveKeyboard:null,_ActiveStub:null,_LoadingInternalName:null,_AnyIndices:[],_DeadKeys:[],_EventHandlers:[],_ActiveControl:null,_Controls:[],_AttachedElements:[],_ActiveElement:null,_LastActiveElement:null,_DfltStyle:"",_MasterDocument:null,
_HotKeys:[],focusTimer:null,focusing:!1,resizing:!1,sortedInputs:[],inputList:[],deferredKRS:[],deferredKR:[],loadTimer:null,waiting:null,baseFont:"sans-serif",appliedFont:"",embeddedFonts:[]};b.initialized=0;b.build=__BUILD__;b.version="2.0";b.helpURL="http://keyman.com/web/";window.KeymanWeb=b;var h=b.util={};b.osk={ready:!1};b.ui={};b.options={};h.events=[];h.currentEvents=[];h.addEventListener=function(f,b){h.removeEventListener(f,b);h.events[f].push(b);return!0};h.removeEventListener=function(f,
b){"undefined"==typeof h.events[f]&&(h.events[f]=[]);for(var c=0;c<h.events[f].length;c++)if(h.events[f][c]==b)return h.events[f].splice(c,1),!0;return!1};h.callEvent=function(f,b){if("undefined"==typeof h.events[f])return!0;if("undefined"!=typeof h.currentEvents[f])return!1;h.currentEvents.push(f);for(var c=0;c<h.events[f].length;c++){var a=h.events[f][c],g=!1;try{g=a(b)}catch(i){g=!1}if(!g)return h.currentEvents.pop(),!1}h.currentEvents.pop();return!0};h.attachDOMEvent=h.attachDOMEvent=function(f,
a,c,e){h.detachDOMEvent(f,a,c,e);f.attachEvent?f.attachEvent("on"+a,c):f.addEventListener&&f.addEventListener(a,c,e?!0:!1);b._EventHandlers=b._push(b._EventHandlers,{Lelem:f,Lname:a,Lhandler:c,LuseCapture:e?!0:!1})};h.detachDOMEvent=h.detachDOMEvent=function(f,a,c){var e,g;for(e=0;e<b._EventHandlers.length;e++)if(g=b._EventHandlers[e],g.Lname==a&&g.Lelem==f&&g.Lhandler==c){g.Lelem.detachEvent?g.Lelem.detachEvent("on"+g.Lname,g.Lhandler):g.Lelem.removeEventListener&&g.Lelem.removeEventListener(g.Lname,
g.Lhandler,g.LuseCapture);b._EventHandlers=b._EventHandlers.slice(0,e).concat(b._EventHandlers.slice(e+1));break}};h.getOption=h.getOption=function(f,a){return f in b.options?b.options[f]:1<arguments.length?a:""};h.setOption=h.setOption=function(f,a){b.options[f]=a};h.fixPath=function(f){if(0==f.length)return f;var b=f.substr(f.length-1,1);return"/"==b||"\\"==b?f:f+"/"};h.getAbsoluteX=h._GetAbsoluteX=function(f){if(!f)return 0;var a=f.offsetLeft?f.offsetLeft:0,c=f;if(c.offsetParent)for(;c.offsetParent;)c=
c.offsetParent,a+=c.offsetLeft;c&&(c.ownerDocument&&f.ownerDocument!=b._MasterDocument)&&(c=c.ownerDocument);return c&&c.parentWindow&&c.parentWindow.frameElement?a+h._GetAbsoluteX(c.parentWindow.frameElement)-c.documentElement.scrollLeft:c&&c.defaultView&&c.defaultView.frameElement?a+h._GetAbsoluteX(c.defaultView.frameElement)-c.documentElement.scrollLeft:a};h.getAbsoluteY=h._GetAbsoluteY=function(f){if(!f)return 0;var a=f.offsetTop?f.offsetTop:0,c=f;if(c.offsetParent)for(;c.offsetParent;)c=c.offsetParent,
a+=c.offsetTop;c&&(c.ownerDocument&&f.ownerDocument!=b._MasterDocument)&&(c=c.ownerDocument);return c&&c.parentWindow&&c.parentWindow.frameElement?a+h._GetAbsoluteY(c.parentWindow.frameElement)-c.documentElement.scrollTop:c&&c.defaultView&&c.defaultView.frameElement?a+h._GetAbsoluteY(c.defaultView.frameElement)-c.documentElement.scrollTop:a};h.getAbsolute=h._GetAbsolute=function(f){var b={};b.x=h._GetAbsoluteX(f);b.y=h._GetAbsoluteY(f);return b};h.createElement=h._CreateElement=function(f){f=document.createElement(f);
"undefined"!=typeof f.onselectstart?(f.unSelectable="on",f.onselectstart=function(){return!1}):(f.style.MozUserSelect="none",f.style.KhtmlUserSelect="none",f.style.UserSelect="none",f.style.WebkitUserSelect="none");return f};h.getIEVersion=h._GetIEVersion=function(){var f,b="";"userAgent"in navigator&&(b=navigator.userAgent);if("selection"in document){var c=navigator.appVersion;f=c.indexOf("MSIE ");if(0<=f){if("BackCompat"==document.compatMode)return 6;c=c.substr(f+5);f=c.indexOf(".");if(0<f)return parseInt(c.substr(0,
f),10)}}f=b.indexOf("Trident/");if(0>f)return 999;b=b.substr(f+8);f=b.indexOf(".");return 0<f?parseInt(b.substr(0,f),10)+4:999};h.getDPI=function(){var b=document.createElement("DIV"),a=b.style,c=96;if("complete"!==document.readyState)return c;b.id="calculateDPI";a.position="absolute";a.display="block";a.visibility="hidden";a.left="10px";a.top="10px";a.width="1in";a.height="10px";document.body.appendChild(b);c="undefined"==typeof window.devicePixelRatio?b.offsetWidth:b.offsetWidth*window.devicePixelRatio;
document.body.removeChild(b);return c};h.getStyleValue=function(b,a){try{if(b&&"undefined"!=typeof window.getComputedStyle)return window.getComputedStyle(b,"").getPropertyValue(a);if(b&&"undefined"!=typeof b.currentStyle)return b.currentStyle[a]}catch(c){}return""};h.getStyleInt=function(b,a,c){b=parseInt(h.getStyleValue(b,a),10);return!isNaN(b)?b:"number"==typeof c?c:0};var j=h.device={touchable:!!("ontouchstart"in window),OS:"",formFactor:"desktop",dyPortrait:0,dyLandscape:0,app:"",version:"0",
orientation:window.orientation};if(navigator&&navigator.userAgent){var l=navigator.userAgent;0<=l.indexOf("iPad")&&(j.OS="iOS",j.formFactor="tablet",j.dyPortrait=j.dyLandscape=0);0<=l.indexOf("iPhone")&&(j.OS="iOS",j.formFactor="phone",j.dyPortrait=j.dyLandscape=25);if(0<=l.indexOf("Android")){j.OS="Android";j.formFactor="phone";j.dyPortrait=75;j.dyLandscape=25;try{j.version=l.match(/(?:Android\s+)(\d+\.\d+\.\d+)/)[1]}catch(a){}}if(0<=l.indexOf("Windows NT")&&(j.OS="Windows",0<=l.indexOf("Touch")&&
(j.formFactor="phone"),"number"==typeof navigator.msMaxTouchPoints&&0<navigator.msMaxTouchPoints))j.touchable=!0}"tablet"==j.formFactor&&400>Math.min(screen.width,screen.height)&&(j.formFactor="phone");"phone"==j.formFactor&&720<Math.max(screen.width,screen.height)&&(j.formFactor="tablet");"iOS"==j.OS&&!("ongesturestart"in window)&&(j.OS="Android");j.browser="web";if(999>h._GetIEVersion())j.browser="ie";else{if("iOS"==j.OS||"macosx"==j.OS.toLowerCase())j.browser="safari";/Firefox|Chrome|OPR/.test(navigator.userAgent)&&
(0<=navigator.userAgent.indexOf("Firefox")&&"onmozorientationchange"in screen?j.browser="firefox":0<=navigator.userAgent.indexOf("OPR")?j.browser="opera":0<=navigator.userAgent.indexOf("Chrome")&&(j.browser="chrome"))}h.isTouchDevice=function(){return j.touchable};h.portraitView=function(){return!h.landscapeView()};h.landscapeView=function(){return typeof window.orientation=="undefined"?false:Math.abs(window.orientation/90)==1};h.getViewportScale=function(){if(screen.width>document.documentElement.clientWidth)return 1;
var b=screen.width;if(h.landscapeView()){if(screen.width<screen.height)b=screen.height}else if(screen.width>screen.height)b=screen.height;return Math.round(100*b/window.innerWidth)/100};h.barHeight=function(){var b=0;j.formFactor=="phone"&&(b=screen.height/2-window.innerHeight-(h.landscapeView()?j.dyLandscape:j.dyPortrait));return b};h._EncodeEntities=function(b){return b.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;")};h.createShim=h.createShim=function(){var b=h._CreateElement("IFRAME");
b.src="";b.style.display="none";b.style.position="absolute";b.style.filter="progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)";b.frameBorder="0";b.scrolling="no";return b};h.showShim=h.showShim=function(b,a,c){if(a)try{a.style.left=h._GetAbsoluteX(b)+"px";a.style.top=h._GetAbsoluteY(b)+"px";if(c){a.style.width=h._GetAbsoluteX(c)-h._GetAbsoluteX(b)+c.offsetWidth+"px";a.style.height=h._GetAbsoluteY(c)-h._GetAbsoluteY(b)+c.offsetHeight+"px"}else{a.style.width=b.offsetWidth+"px";a.style.height=
b.offsetHeight+"px"}a.style.zindex="9999";a.style.display="block"}catch(e){}};h.hideShim=function(b){try{if(b)b.style.display="none"}catch(a){}};h.rgba=h.rgba=function(b,a,c,e,g){var i="transparent";if(h._GetIEVersion()<9){g=Math.floor(100*g);a=a.toString(16);c=c.toString(16);e=e.toString(16);a=("00"+a).substr(-2);c=("00"+c).substr(-2);e=("00"+e).substr(-2);e=g+a+c+e;b.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#"+e+",endColorstr=#"+e+")";b.zoom="1"}else try{i="rgba("+a+","+
c+","+e+","+g+")"}catch(s){i="rgb("+a+","+c+","+e+")"}return i};h.addStyleSheet=h.addStyleSheet=function(b){var a=document.createElement("STYLE");a.type="text/css";a.styleSheet?a.styleSheet.cssText=b:a.appendChild(document.createTextNode(b));b=document.getElementsByTagName("HEAD");b.length>0?b[0].appendChild(a):document.body.appendChild(a);return a};h.removeStyleSheet=h.removeStyleSheet=function(b){if(b==null||typeof b!="object"||b.nodeName!="STYLE"||typeof b.parentNode=="undefined"||b.parentNode==
null)return false;b.parentNode.removeChild(b);return true};h.linkStyleSheet=h.linkStyleSheet=function(b){var a=document.getElementsByTagName("head");if(a.length>0){var c=document.createElement("link");c.type="text/css";c.rel="stylesheet";c.href=b;a[0].appendChild(c)}};h.addFontFaceStyleSheet=function(a){if(!(typeof a=="undefined"||typeof a.files=="undefined")){var d,c="",e="",g="",i=[];for(d=0;d<b.embeddedFonts.length;d++)if(b.embeddedFonts[d]==a.family)return;typeof a.files=="string"?i[0]=a.files:
i=a.files;for(d=0;d<i.length;d++){i[d].indexOf(".ttf")>0&&(c=i[d]);i[d].indexOf(".woff")>0&&(e=i[d]);i[d].indexOf(".eot")>0&&(g=i[d])}c!=""&&c.indexOf("/")<0&&(c=b.options.fonts+c);e!=""&&e.indexOf("/")<0&&(e=b.options.fonts+e);g!=""&&g.indexOf("/")<0&&(g=b.options.fonts+g);d="@font-face {\nfont-family:"+a.family+";\nfont-style:normal;\nfont-weight:normal;\n";i=h._GetIEVersion();if(i>=999)if(j.OS=="iOS")if(c!="")d=d+"src:url('"+c+"') format('truetype');";else return;else if(c!=""&&e!="")d=d+"src:url('"+
e+"') format('woff'),url('"+c+"') format('truetype');";else if(e!="")d=d+"src:url('"+e+"') format('woff');";else if(c!="")d=d+"src:url('"+c+"') format('truetype');";else return;else if(g!=""&&i<9)d=d+"src:url('"+g+"?#iefix') format('embedded-opentype');";else if(g!="")d=d+"src:url('"+g+"');";else return;h.addStyleSheet(d+"\n}\n");b.embeddedFonts.push(a.family)}};h.loadCookie=h.loadCookie=function(b){var a={};if(arguments.length>0){var c=h.loadCookie(),e;for(e in c)if(e==b)for(var g=unescape(c[e]).split(";"),
i=0;i<g.length;i++){var s=g[i].split("=");a[s[0]]=s.length>1?s[1]:""}}else if(typeof document.cookie!="undefined"&&document.cookie!=""){c=document.cookie.split(/;\s*/);for(i=0;i<c.length;i++){g=c[i].split("=");g.length==2&&(a[g[0]]=g[1])}}return a};h.saveCookie=h.saveCookie=function(b,a){var c="",e;for(e in a)c=c+e+"="+a[e]+";";e=(new Date((new Date).valueOf()+2592E6)).toGMTString();document.cookie=b+"="+escape(c)+"; path=/; expires="+e};h.toNumber=h.toNumber=function(b,a){var c=parseInt(b,10);return isNaN(c)?
a:c};h.toFloat=h.toFloat=function(b,a){var c=parseFloat(b);return isNaN(c)?a:c};h.toNzString=h.nzString=function(b,a){var c="";arguments.length>1&&(c=a);return typeof b=="undefined"||b==null||b==0||b==""?c:""+b};h.deepCopy=function(b,a){var c=a||{},e;for(e in b)if(typeof b[e]==="object"){c[e]=b[e].constructor===Array?[]:{};h.deepCopy(b[e],c[e])}else c[e]=b[e];return c};"indexOf"in Array||(Array.prototype.indexOf=function(b,a){for(var c=a||0;c<this.length;c++)if(this[c]==b)return c;return-1});h.eventTarget=
function(b){return b&&b.target?b.target:window.event?window.event.srcElement:null};h.eventType=function(b){return b&&b.type?b.type:window.event?window.event.type:""};h.alert=h.alert=function(a,d){var c=b.waiting,e=c.firstChild.childNodes;e[0].style.display="block";e[1].className="kmw-alert-text";e[1].innerHTML=a;e[2].style.display="none";c.style.display="block";c.dismiss=arguments.length>1?d:null};h.prepareWait=function(){var a=document.createElement("DIV"),d=document.createElement("DIV"),c=document.createElement("DIV"),
e=document.createElement("DIV"),g=document.createElement("DIV");a.className="kmw-wait-background";d.className="kmw-wait-box";a.dismiss=null;c.className="kmw-wait-text";e.className="kmw-wait-graphic";g.className="kmw-alert-close";d.ontouchstart=d.onmousedown=d.onclick=function(){if(g.style.display=="block"){a.style.display="none";a.dismiss&&a.dismiss()}};a.ontouchstart=a.onmousedown=a.onclick=function(b){b.preventDefault();b.stopPropagation()};d.appendChild(g);d.appendChild(c);d.appendChild(e);a.appendChild(d);
document.body.appendChild(a);b.waiting=a};h.wait=function(a){if(j.app==""){var d=b.waiting,c=d.firstChild.childNodes;if(a){d.pending=true;window.setTimeout(function(){if(d.pending){window.scrollTo(0,0);c[0].style.display="none";c[1].className="kmw-wait-text";c[1].innerHTML=a;c[2].style.display="block";d.style.display="block"}},1E3)}else if(d.pending){c[1].innerHTML="";d.pending=false;d.style.display="none"}}};h.myPath=function(){var b="keymanweb",a,c=document.getElementsByTagName("script"),e;j.app!=
""&&(b="keymanios");for(a=0;a<c.length;a++){e=c[a];if(e.src.indexOf(b)>=0)return e.src.substr(0,e.src.lastIndexOf("/")+1)}return""};h.testString=function(b){var a=b.family;if("sample"in b&&typeof b.sample=="string")return"BESbswy"+b.sample;for(var c=["TamilWeb","TibetanWeb","LatinWeb","CherokeeWeb","EgyptianWeb","SinhalaWeb","KhmerWeb","ArabicWeb","BurmeseWeb","LaoWeb","OriyaWeb","GeezWeb"],e=["\u0bbe\u0bf5","\u0f7f\u0fd0","\u02b0\u02a4","\u13d0\u13c9","\ua723\uf7d3","\u0dd8\u0da3","\u17d6\u178e",
"\u0639\u06b3","\u1038\u1024","\u0ec0\u0edd","\u0b03\u0b06","\u1361\u132c"],b=0;b<c.length;b++)if(a==c[b])return"BESbswy"+e[b];return"BESbswy"};h.checkFont=function(b){var a=false,a=b.family,c=document.createElement("DIV"),e=c.style,g=document.createElement("P"),i=document.createElement("P"),s=document.createElement("SPAN"),k=s.style,j=document.createElement("SPAN"),n=j.style;e.position="absolute";e.top="10px";e.left="10px";e.visibility="hidden";document.body.appendChild(c);c.appendChild(g);c.appendChild(i);
g.appendChild(s);i.appendChild(j);s.setAttribute("style","font-family:monospace !important");n.fontFamily=a+",monospace";k.fontSize=n.fontSize="24px";s.innerHTML=j.innerHTML=h.testString(b);if(s.offsetWidth!=j.offsetWidth){s.setAttribute("style","font-family:sans-serif !important");n.fontFamily=a+",sans-serif";if(s.offsetWidth!=j.offsetWidth){s.setAttribute("style","font-family:serif !important");n.fontFamily=a+",serif"}}a=s.offsetWidth!=j.offsetWidth;g.removeChild(s);i.removeChild(j);c.removeChild(g);
c.removeChild(i);document.body.removeChild(c);return a};h.checkFontDescriptor=function(b){return typeof b=="undefined"||typeof b.family!="string"?true:h.checkFont(b)}})();(function(){var b=window.tavultesoft.keymanweb,h=b.osk,j=b.util,l=j.device;b.debug=b.debug=function(a){var d;if(null==b.debugElement){var c=document.createElement("DIV");d=c.style;d.position="absolute";d.width="30%";d.maxHeight="50%";d.top="0";d.right="0";d.minHeight="50px";d.border="1px solid blue";d.whiteSpace="pre-line";d.overflowY="scroll";d=document.createElement("P");d.id="debug_output";d.style.margin="2px";c.appendChild(d);document.body.appendChild(c);b.debugElement=d}if(null!=(d=document.getElementById("debug_output")))if(0==
arguments.length)"undefined"!=typeof d.textContent?d.textContent="":d.innerHTML="";else{var c=(new Date).toTimeString().substr(3,5),e=a,g;if("object"==typeof a)if(null==a)e="null";else{e="{";for(g in a){e=e+g+":";switch(typeof a[g]){case "string":case "number":case "boolean":e+=a[g];break;default:e+=typeof a[g]}e+="; "}2<e.length&&(e=e.substr(0,e.length-2));e+="}"}"undefined"!=typeof d.textContent?d.textContent=c+" "+e+"\n"+d.textContent:d.innerHTML=c+" "+e+"<br />"+d.innerHTML}};b.debugElement=null;
b.addEventListener=function(b,a){return j.addEventListener("kmw."+b,a)};b.setupTouchDevice=function(){b.cancelInput=function(){b._ActiveElement=null;b.hideCaret();h.hideNow()};b.setBlur=function(a){"relatedTarget"in a&&a.relatedTarget&&("DIV"!=a.relatedTarget.nodeName||-1==a.relatedTarget.className.indexOf("keymanweb-input"))?b.cancelInput():b.focusing||b.cancelInput()};b.setFocus=function(a){b.focusing=!0;b.focusTimer=window.setTimeout(function(){b.focusing=!1},1E3);var c=a;"object"==typeof a.touches&&
(c=a.touches[0]);var a=c.clientX,f=c.clientY,e=c.target,d;d="SPAN"==e.nodeName?e.parentNode:null!=e.className&&0<=e.className.indexOf("keymanweb-input")?e.firstChild:e;c=d.parentNode;b._ActiveElement!=c&&(b.hideCaret(),b._ActiveElement=c,c.focus());b.useInternalKeyboard=!1;h.ready&&!h._Visible&&h._Show();if("DIV"==e.nodeName)f=j._GetAbsoluteX(d.firstChild),"rtl"==c.dir?(f+=d.firstChild.offsetWidth,d=a>f?0:1E5):d=a<f?0:1E5,b.setTextCaret(c,d),b.scrollInput(c);else{var g,i,k,s,m,n,e=d.childNodes[1];
g=0;i=b.getText(c)._kmwLength();d=b.getTextCaret(c);s=document.body.scrollTop;if("TEXTAREA"==c.base.nodeName){m=Math.round(c.base.offsetHeight/c.base.rows);for(n=0;16>n;n++){k=j._GetAbsoluteY(e)-s;if(k>f&&d>g&&d!=i)i=d,d=Math.round((d+g)/2);else if(k<f-m&&d<i&&d!=g)g=d,d=Math.round((d+i)/2);else break;b.setTextCaret(c,d)}for(;j._GetAbsoluteY(e)-s>f&&d>g;)b.setTextCaret(c,--d);for(;j._GetAbsoluteY(e)-s<f-m&&d<i;)b.setTextCaret(c,++d)}if("rtl"==c.dir){for(n=0;16>n;n++){f=j._GetAbsoluteX(e);if(f<a&&
d>g&&d!=i)i=d,d=Math.round((d+g)/2);else if(f>a&&d<i&&d!=g)g=d,d=Math.round((d+i)/2);else break;b.setTextCaret(c,d)}for(;j._GetAbsoluteX(e)<a&&d>g;)b.setTextCaret(c,--d);for(;j._GetAbsoluteX(e)>a&&d<i;)b.setTextCaret(c,++d)}else{for(n=0;16>n;n++){f=j._GetAbsoluteX(e);if(f>a&&d>g&&d!=i)i=d,d=Math.round((d+g)/2);else if(f<a&&d<i&&d!=g)g=d,d=Math.round((d+i)/2);else break;b.setTextCaret(c,d)}for(;j._GetAbsoluteX(e)>a&&d>g;)b.setTextCaret(c,--d);for(;j._GetAbsoluteX(e)<a&&d<i;)b.setTextCaret(c,++d)}}b._ActiveControl=
null;b._LastActiveElement=c;for(a=0;a<b._Controls.length;a++)if(b._Controls[a].LControl==c){b._ActiveControl=b._Controls[a];break}null!=b._ActiveControl&&null!=b._ActiveControl.LDefaultInternalName&&(b._JustActivatedKeymanWebUI?b._ActiveControl.LDefaultInternalName=null==b._ActiveKeyboard?"":b._ActiveKeyboard.KI:b._SetActiveKeyboard(b._ActiveControl.LDefaultInternalName,"",!0));!b._IsIEEditableIframe(c,1)||!b._IsMozillaEditableIframe(c,1)?b._DisableInput=1:(b._DisableInput=0,b._JustActivatedKeymanWebUI||
(b._DeadKeys=[],b._NotifyKeyboard(0,c,1)),!b._JustActivatedKeymanWebUI&&b._SelectionControl!=c&&(b._IsActivatingKeymanWebUI=0),b._JustActivatedKeymanWebUI=0,b._SelectionControl=c)};b.caret=document.createElement("DIV");var a=b.caret.style;a.position="absolute";a.height="16px";a.width="2px";a.backgroundColor="blue";a.border="none";a.left=a.top=0;a.display="block";a.visibility="hidden";a.zIndex="9998";b.showCaret=function(a){if(a&&a.firstChild&&!(3>a.firstChild.childNodes.length)){var c=a.firstChild,
f=b.caret.style,e=c.childNodes[1];b.caret.parentNode!=c&&c.appendChild(b.caret);f.left=e.offsetLeft+"px";f.top=e.offsetTop+"px";f.height=e.offsetHeight-1+"px";f.visibility="hidden";b.scrollBody(a);b.setScrollBar(a)}};b.setScrollBar=function(b){var a=b.childNodes[0],c=b.childNodes[1].style;(a.offsetWidth>b.offsetWidth||0>a.offsetLeft)&&"TEXTAREA"!=b.base.nodeName?(c.height="4px",c.width=100*(b.offsetWidth/a.offsetWidth)+"%",c.left=100*(-a.offsetLeft/a.offsetWidth)+"%",c.top="0",c.visibility="visible"):
a.offsetHeight>b.offsetHeight||0>a.offsetTop?(c.width="4px",c.height=100*(b.offsetHeight/a.offsetHeight)+"%",c.top=100*(-a.offsetTop/a.offsetHeight)+"%",c.left="0",c.visibility="visible"):c.visibility="hidden"};b.flashCaret=function(){if(l.touchable&&null!=b._ActiveElement){var a=b.caret.style;a.visibility="visible"!=a.visibility?"visible":"hidden"}};b.hideCaret=function(){var a=b._LastActiveElement;if(a&&null!=a.className&&0<=a.className.indexOf("keymanweb-input")){a.base.value=b.getText(a);b.setText(a,
null,1E5);var c=a.firstChild.style;"TEXTAREA"==a.base.nodeName?c.top="0":c.left="rtl"==a.base.dir?a.offsetWidth-a.firstChild.offsetWidth-8+"px":"0";b.caret.parentNode&&b.caret.parentNode.removeChild(b.caret);b.caret.style.visibility="hidden";1<a.childNodes.length&&(a.childNodes[1].style.visibility="hidden")}};b.timerId=window.setInterval(b.flashCaret,500);b.setText=function(a,c,f){if(a&&0<a.childNodes.length){var e=a.firstChild,d=0;if(3<=e.childNodes.length){var g=e.childNodes[0],e=e.childNodes[2],
i;null===c&&(i="string"==typeof g.textContent?g.textContent:g.innerText,c="string"==typeof e.textContent?e.textContent:e.innerText,c=i+c);0>f&&(f=0);d=c._kmwLength();if(null===f||f>d)f=d;i=c._kmwSubstr(0,f);c=c._kmwSubstr(f);"string"==typeof g.textContent?g.textContent=i:g.innerText=i;"string"==typeof e.textContent?e.textContent=c:e.innerText=c}}b.updateBaseElement(a,d)};b.updateBaseElement=function(a,c){a.base.value=b.getText(a);a.style.backgroundColor=0==c?"transparent":window.getComputedStyle(a.base,
null).backgroundColor;"iOS"==l.OS&&(a.base.style.visibility=0==c?"visible":"hidden")};b.getText=function(b){return null==b?"":"string"==typeof b.textContent?b.textContent:b.innerText};b.getTextBeforeCaret=function(b){if(b&&1<b.childNodes.length&&(b=b.firstChild,0<b.childNodes.length)){b=b.childNodes[0];if("textContent"in b)return b.textContent;if("innerText"in b)return b.innerText}return""};b.setTextBeforeCaret=function(a,c){if(a&&0<a.childNodes.length){var f=a.firstChild,e=0;1<f.childNodes.length&&
(e=f.childNodes[0],f=f.childNodes[2],"TEXTAREA"!=a.base.nodeName&&(c=c.replace(/\s+$/," ")),"textContent"in e?e.textContent=c:"innerText"in e&&(e.innerText=c),e=c.length,"textContent"in f?e+=f.textContent.length:"innerText"in f&&(e+=f.innerText.length))}b.updateBaseElement(a,e);b.scrollInput(a)};b.getTextCaret=function(a){return b.getTextBeforeCaret(a)._kmwLength()};b.setTextCaret=function(a,c){b.setText(a,null,c);b.showCaret(a)};b.dragInput=function(a){a.preventDefault();a.stopPropagation();var c=
"object"==typeof a.targetTouches?a.targetTouches[0].target:a.target;if(null!=c){if(null==c.className||0>c.className.indexOf("keymanweb-input"))c=c.parentNode;if(null==c.className||0>c.className.indexOf("keymanweb-input"))c=c.parentNode;if(!(null==c.className||0>c.className.indexOf("keymanweb-input"))){var f="object"==typeof a.touches?a.touches[0].screenX:a.screenX,e="object"==typeof a.touches?a.touches[0].screenY:a.screenY;if("undefined"==typeof b.firstTouch||null==b.firstTouch)b.firstTouch={x:f,
y:e};else{var d=b.firstTouch.x,g=b.firstTouch.y,a=c.firstChild,i;if("TEXTAREA"==c.base.nodeName){if(f=parseInt(a.style.top,10),isNaN(f)&&(f=0),d=g-e,-4>d||4<d)a.style.top=(f<d?f-d:0)+"px",b.firstTouch.y=e}else if(e=parseInt(a.style.left,10),isNaN(e)&&(e=0),i=d-f,-4>i||4<i)d=0,g=j._GetAbsoluteX(c)+c.offsetWidth-a.offsetWidth-32,"rtl"==c.base.dir?d=16:g-=24,e-=i,e>d&&(e=d),e<g&&(e=g),a.style.left=e+"px",b.firstTouch.x=f}b.setScrollBar(c)}}};b.scrollInput=function(a){if(a&&a.firstChild&&!(null==a.className||
0>a.className.indexOf("keymanweb-input"))){var c=a.firstChild;if(!(3>c.childNodes.length)){var f=c.childNodes[1],e=j._GetAbsoluteX(f),f=j._GetAbsoluteY(f),d=j._GetAbsoluteX(a),g=j._GetAbsoluteY(a),i=parseInt(c.style.left,10),h=parseInt(c.style.top,10),k=0,s=0;isNaN(i)&&(i=0);isNaN(h)&&(h=0);"TEXTAREA"==a.base.nodeName?(e=Math.round(a.offsetHeight/a.base.rows),f<g&&(s=f-g),f>g+a.offsetHeight-e&&(s=f-g-a.offsetHeight+e),0!=s&&(c.style.top=(h<s?h-s:0)+"px")):(e<d+8&&(k=e-d-12),e>d+a.offsetWidth-12&&
(k=e-d-a.offsetWidth+12),0!=k&&(c.style.left=(i<k?i-k:0)+"px"));b.showCaret(a)}}};b.scrollBody=function(a){if(a&&!(null==a.className||0>a.className.indexOf("keymanweb-input")||!h.ready)){var a=a.firstChild.childNodes[1],b=j._GetAbsoluteY(a),c=window.pageYOffset,f=0;b<c?f=b-c:(f=b-c-(window.innerHeight-h._Box.offsetHeight-a.offsetHeight-2),0>f&&(f=0));0!=f&&window.scrollTo(0,f+window.pageYOffset)}};b.updateInput=function(a){var b=a.style,c=a.base,f=window.getComputedStyle(c,null),e=parseInt(f.marginLeft,
10),d=parseInt(f.marginTop,10),g=j._GetAbsoluteX(c),i=j._GetAbsoluteY(c),h=a.offsetParent;h&&(g-=j._GetAbsoluteX(h),i-=j._GetAbsoluteY(h));isNaN(e)&&(e=0);isNaN(d)&&(d=0);b.left=g-e+"px";b.top=i-d+"px";"undefined"!=typeof f.MozBoxSizing&&(b.left=g+"px",b.top=i+"px");var e=c.offsetWidth,c=c.offsetHeight,d=parseInt(f.paddingLeft,10),g=parseInt(f.paddingRight,10),i=parseInt(f.paddingTop,10),h=parseInt(f.paddingBottom,10),k=parseInt(f.borderLeft,10),s=parseInt(f.borderRight,10),m=parseInt(f.borderTop,
10),n=parseInt(f.borderBottom,10),F="undefined";"undefined"!=typeof f.boxSizing?F=f.boxSizing:"undefined"!=typeof f.MozBoxSizing&&(F=f.MozBoxSizing);"content-box"==F&&(isNaN(d)||(e-=d),isNaN(g)||(e-=g),isNaN(k)||(e-=k),isNaN(s)||(e-=s),isNaN(i)||(c-=i),isNaN(h)||(c-=h),isNaN(m)||(c-=m),isNaN(n)||(c-=n));"Android"==l.OS&&("undefined"!=typeof f.MozBoxSizing?(b.paddingTop=i+1+"px",b.paddingLeft=d+"px","TEXTAREA"==a.base.nodeName?b.marginTop="1px":b.marginLeft="1px",e--,c--):(e++,c++));b.width=e+"px";
b.height=c+"px"};b.alignInputs=function(a){if(l.touchable&&""==l.app)for(var c=0;c<b.inputList.length;c++)a?(b.updateInput(b.inputList[c]),b.inputList[c].style.visibility="visible",0<b.inputList[c].base.textContent.length&&(b.inputList[c].base.style.visibility="hidden")):(b.inputList[c].style.visibility="hidden",b.inputList[c].base.style.visibility="visible")};for(var d=0;2>d;d++)for(var c=document.getElementsByTagName(0==d?"INPUT":"TEXTAREA"),a=0;a<c.length;a++)if(c[a].kmwInput){var e=document.createElement("DIV");
e.base=e.base=c[a];e.base.className=e.base.className?e.base.className+" keymanweb-font":"keymanweb-font";c[a].kmw_ip=e;b.inputList.push(e)}else c[a].addEventListener("touchstart",function(){b.focusing=!1;clearTimeout(b.focusTimer);h.hideNow()},!1);for(var g,i,s,k,m,n,a=0;a<b.inputList.length;a++)e=b.inputList[a],e.className="keymanweb-input",e.dir=e.base.dir,g=document.createElement("DIV"),c=window.getComputedStyle(e.base,null),d=e.style,d.overflow="hidden",d.position="absolute",d.border="hidden",
d.border="none",d.borderRadius="5px",m=document.createElement("DIV"),i=m.style,i.position="absolute",i.height=i.width="4px",i.left=i.top="0",i.display="block",i.visibility="hidden",i.backgroundColor="#808080",i.borderRadius="2px",i=document.createElement("SPAN"),s=document.createElement("SPAN"),k=document.createElement("SPAN"),i.innerHTML=s.innerHTML=k.innerHTML="",i.className=s.className=k.className="keymanweb-font",g.appendChild(i),g.appendChild(k),g.appendChild(s),e.appendChild(g),e.appendChild(m),
g=g.style,g.position="absolute",m=i.style,n=s.style,k=k.style,m.border=n.border="none",m.height=n.height="100%",m.fontFamily=n.fontFamily=g.fontFamily=c.fontFamily,"INPUT"==e.base.nodeName&&!isNaN(parseInt(c.height,10))&&(m.lineHeight=n.lineHeight=c.height),k.border="1px solid red",k.visibility="hidden",k.marginLeft=k.marginRight="-1px",d.padding="8px",g.padding="0px 2px",g.backgroundColor="Android"==l.OS&&"transparent"==c.backgroundColor?"#fff":c.backgroundColor,e.tabIndex="0",e.style.msTouchAction=
"none",e.onmspointerdown=e.ontouchstart=b.setFocus,e.onmspointerup=e.ontouchend=function(a){a.stopPropagation()},e.onmspointermove=e.ontouchmove=b.dragInput,e.onblur=b.setBlur,i.style.whiteSpace="TEXTAREA"==e.base.nodeName?s.style.whiteSpace="pre-wrap":s.style.whiteSpace="pre",e.base.parentNode.appendChild(e),b.updateInput(e),d=e.style,d.color=c.color,d.fontFamily=c.fontFamily,d.fontSize=c.fontSize,d.fontWeight=c.fontWeight,d.textDecoration=c.textDecoration,d.padding=c.padding,d.margin=c.margin,d.border=
c.border,d.borderRadius=c.borderRadius,"webkitTapHighlightColor"in d&&(d.webkitTapHighlightColor="rgba(0,0,0,0)"),"TEXTAREA"==e.base.nodeName?(2==e.base.rows&&(i=parseInt(c.height,10)-parseInt(c.paddingTop,10)-parseInt(c.paddingBottom,10),c=parseInt(c.fontSize,10),c=Math.round(i/c),c>e.base.rows+1&&(e.base.rows=c)),g.width=d.width,g.minHeight=d.height):(g.minWidth=d.width,g.height=d.height),e.base.style.visibility="hidden",function(a){a.base.addEventListener("resize",function(){b.updateInput(a)},
false)}(e),b.setText(e,e.base.value,null)};b.setupDesktopPage=function(){for(var a=0;2>a;a++)for(var d=document.getElementsByTagName(0==a?"INPUT":"TEXTAREA"),c=0;c<d.length;c++)0>d[c].className.indexOf("kmw-disabled")&&!d[c].readOnly&&b.inputList.push(d[c]),d[c].className=d[c].className?d[c].className+" keymanweb-font":"keymanweb-font"};b.getBaseFont=function(){var a=document.getElementsByTagName("INPUT"),b=document.getElementsByTagName("TEXTAREA"),c=0,e;0==a.length&&0==b.length?c=0:0<a.length&&0==
b.length?c=1:0==a.length&&0<b.length?c=2:a[0].offsetTop<b[0].offsetTop?c=1:a[0].offsetTop>b[0].offsetTop?c=2:a[0].offsetLeft<b[0].offsetLeft?c=1:a[0].offsetLeft>b[0].offsetLeft&&(c=2);switch(c){case 0:case 1:j.getStyleValue(a[0],"font-family");case 2:e=j.getStyleValue(b[0],"font-family")}if("undefined"==typeof e||"monospace"==e)e="Arial,sans-serif";return e};b.setFocus=function(){};b.timerID=null;b.getText=function(){return""};b.setText=function(){};b.getTextBeforeCaret=function(){return""};b.setTextBeforeCaret=
function(){};b.getTextCaret=function(){return 0};b.setTextCaret=function(){};b.hideCaret=function(){};b.flashCaret=function(){};b.updateInput=function(){};b.alignInputs=function(){};if(document.selection){var a=navigator.appVersion;"undefined"==typeof document.createEventObject&&(0<=a.indexOf("MSIE 5.0")||0<=a.indexOf("MSIE 4.0")||0<=a.indexOf("MSIE 3.0"))?b.legacy=1:0<=a.indexOf("MSIE 6.0")?b._IE=6:0<=a.indexOf("MSIE 7.0")?b._IE=7:0<=a.indexOf("MSIE 8.0")&&(b._IE=8);b._IE&&"BackCompat"==document.compatMode&&
(b._IE=6)}h._BaseLayout="undefined"!==typeof window.KeymanWeb_BaseLayout?window.KeymanWeb_BaseLayout:"us";b._BrowserIsSafari=0<=navigator.userAgent.indexOf("AppleWebKit");b._GetEventObject=function(a){if(!a&&(a=window.event,!a&&(a=b._GetLastActiveElement()))){if(a=a.ownerDocument)a=a.parentWindow;if(!a)return null;a=a.event}return a};b._push=function(a,b){a.push?a.push(b):a=a.concat(b);return a};b._IsAttached=function(a){for(var d=0;d<b._AttachedElements.length;d++)if(b._AttachedElements[d]==a)return 1;
return 0};b.attachToControl=b.attachToControl=function(a){var d=a.attributes.readonly,c=a.className;!("object"==typeof d&&"false"!=d.value)&&!("string"==typeof c&&0<=c.indexOf("kmw-disabled"))&&("iframe"==a.tagName.toLowerCase()?b._AttachToIframe(a):(j.attachDOMEvent(a,"focus",b._ControlFocus),j.attachDOMEvent(a,"blur",b._ControlBlur),a.onkeypress=b._KeyPress,a.onkeydown=b._KeyDown,a.onkeyup=b._KeyUp),b._IsAttached(a)||b._AttachedElements.push(a))};b._AttachToIframe=function(a){try{var d=a.contentWindow.document;
if(d)if(d.parentWindow){if("on"==d.designMode.toLowerCase()||d.body.isContentEditable)j.attachDOMEvent(a,"focus",b._ControlFocus),j.attachDOMEvent(a,"blur",b._ControlBlur),j.attachDOMEvent(d,"keydown",b._KeyDown),j.attachDOMEvent(d,"keypress",b._KeyPress),j.attachDOMEvent(d,"keyup",b._KeyUp),b.legacy||(j.attachDOMEvent(d,"selectionchange",b._SelectionChange),b._SelectionChange())}else"on"==d.designMode.toLowerCase()?(j.attachDOMEvent(d,"focus",b._ControlFocus),j.attachDOMEvent(d,"blur",b._ControlBlur),
j.attachDOMEvent(d,"keydown",b._KeyDown),j.attachDOMEvent(d,"keypress",b._KeyPress),j.attachDOMEvent(d,"keyup",b._KeyUp)):b._AttachToControls(d)}catch(c){}};b.GetEnabled=function(){return b._Enabled};b.SetEnabled=function(a){a=a?1:0;b._Enabled!=a&&(b._Enabled=a,!a&&b.HideInterface&&b.HideInterface())};b.DisableControl=function(a){var d;for(d=0;d<b._Controls.length;d++)if(b._Controls[d].LControl==a){b._Controls[d].LEnabled=0;return}b._Controls=b._push(b._Controls,{LControl:a,LEnabled:0,LDefaultInternalName:"-"})};
b.EnableControl=function(a){var d;for(d=0;d<b._Controls.length;d++)if(b._Controls[d].LControl==a){b._Controls[d].LEnabled=1;return}b._Controls=b._push(b._Controls,{LControl:a,LEnabled:1,LDefaultInternalName:"-"})};b.SetDefaultKeyboardForControl=function(a,d){var c;for(c=0;c<b._Controls.length;c++)if(b._Controls[c].LControl==a){b._Controls[c].LDefaultInternalName=d;return}b._Controls=b._push(b._Controls,{LControl:a,LEnabled:1,LDefaultInternalName:d})};b.focusLastActiveElement=b._FocusLastActiveElement=
function(){b._LastActiveElement&&(b._JustActivatedKeymanWebUI=1,b._IsMozillaEditableIframe(b._LastActiveElement,0)?b._LastActiveElement.defaultView.focus():b._LastActiveElement.focus&&b._LastActiveElement.focus())};b.getLastActiveElement=b._GetLastActiveElement=function(){return b._LastActiveElement};b.setActiveElement=b.setActiveElement=function(a){"string"==typeof a&&(a=document.getElementById(a));b._ActiveElement=b._LastActiveElement=a};b.getUIState=b.getUIState=function(){var a={};a.activationPending=
a.activationPending=b._IsActivatingKeymanWebUI;a.activated=a.activated=b._JustActivatedKeymanWebUI;return a};b.activatingUI=function(a){b._IsActivatingKeymanWebUI=a?1:0};b._ControlFocus=function(a){var d;if(!b._Enabled)return!0;a=b._GetEventObject(a);if(!a)return!0;if(a.target)a=a.target;else if(a.srcElement)a=a.srcElement;else return!0;if(l.touchable&&(null==a.className||0>a.className.indexOf("keymanweb-input")))return!0;d=a.nodeName.toLowerCase();if("input"==d){if(d=a.type.toLowerCase(),!("text"==
d||"search"==d))return!0}else if("textarea"!=d)return!0;b._ActiveElement=a;3==a.nodeType&&(a=a.parentNode);var c=a;l.touchable&&(null==a.className||0>a.className.indexOf("keymanweb-input"))&&b.scrollBody(a);"IFRAME"==a.tagName&&(b._AttachToIframe(a),a=a.contentWindow.document);b._ActiveControl=null;b._LastActiveElement=a;for(d=0;d<b._Controls.length;d++)if(b._Controls[d].LControl==a){b._ActiveControl=b._Controls[d];break}null!=b._ActiveControl&&null!=b._ActiveControl.LDefaultInternalName&&(b._JustActivatedKeymanWebUI?
b._ActiveControl.LDefaultInternalName=null==b._ActiveKeyboard?"":b._ActiveKeyboard.KI:b._SetActiveKeyboard(b._ActiveControl.LDefaultInternalName,"",!0));if(!b._IsIEEditableIframe(a,1)||!b._IsMozillaEditableIframe(a,1))return b._DisableInput=1,!0;b._DisableInput=0;b._JustActivatedKeymanWebUI||(b._DeadKeys=[],b._NotifyKeyboard(0,a,1));!b._JustActivatedKeymanWebUI&&b._SelectionControl!=a&&(b._IsActivatingKeymanWebUI=0);b._JustActivatedKeymanWebUI=0;b._SelectionControl=a;a._KeymanWebSelectionStart=a._KeymanWebSelectionEnd=
null;b._SetTargDir(a);b.doControlFocused(c,b._ActiveControl);l.touchable?h._Enabled=1:h.ready&&(b.isCJK()&&(h._Enabled=1),h._Enabled?h._Show():h._Hide(!1));return!0};b._IsIEEditableIframe=function(a,b){var c,e=a&&(c=a.tagName)&&"body"==c.toLowerCase()&&(c=a.ownerDocument)&&c.parentWindow;return!b&&e||b&&(!e||a.isContentEditable)};b._IsMozillaEditableIframe=function(a,b){var c,e=a&&(c=a.defaultView)&&c.frameElement;return!b&&e||b&&(!e||"on"==c.document.designMode.toLowerCase())};b._ControlBlur=function(a){var d;
if(!b._Enabled)return!0;a=b._GetEventObject(a);if(!a)return!0;if(a.target)d=a.target;else if(a.srcElement)d=a.srcElement;else return!0;b._ActiveElement=null;l.touchable&&b.hideCaret();3==d.nodeType&&(d=d.parentNode);"IFRAME"==d.tagName&&(d=d.contentWindow.document);d.setSelectionRange&&(d._KeymanWebSelectionStart=d.value._kmwCodeUnitToCodePoint(d.selectionStart),d._KeymanWebSelectionEnd=d.value._kmwCodeUnitToCodePoint(d.selectionEnd));b._LastActiveElement=d;null!=b._ActiveControl&&null!=b._ActiveControl.LDefaultInternalName&&
(b._ActiveControl.LDefaultInternalName=null==b._ActiveKeyboard?"":b._ActiveKeyboard.KI);b._ActiveControl=null;b._IsActivatingKeymanWebUI||b._NotifyKeyboard(0,d,0);a=b._GetEventObject(a);b.doControlBlurred(d,a,b._IsActivatingKeymanWebUI);h.ready&&!b._IsActivatingKeymanWebUI&&h._Hide(!1);return!0};b.doControlBlurred=function(a,b,c){var e={};e.target=a;e.event=b;e.isActivating=c;return j.callEvent("kmw.controlblurred",e)};b.doControlFocused=function(a,b){var c={};c.target=a;c.activeControl=b;return j.callEvent("kmw.controlfocused",
c)};b.doKeyboardRegistered=function(a,b,c,e){var g={};g.internalName=a;g.language=b;g.keyboardName=c;g.languageCode=e;return j.callEvent("kmw.keyboardregistered",g)};b.doKeyboardLoaded=function(a){var b={};b.keyboardName=a;return j.callEvent("kmw.keyboardloaded",b)};b.doBeforeKeyboardChange=function(a,b){var c={};c.internalName=a;c.languageCode=b;return j.callEvent("kmw.beforekeyboardchange",c)};b.doKeyboardChange=function(a,b,c){var e={};e.internalName=a;e.languageCode=b;e.indirect=2<arguments.length?
c:!1;return j.callEvent("kmw.keyboardchange",e)};b.doUnloadOSK=function(){return j.callEvent("kmw.unloadosk",{})};b.doLoadUI=function(){return j.callEvent("kmw.loaduserinterface",{})};b.doUnloadUI=function(){return j.callEvent("kmw.unloaduserinterface",{})};b._BubbledFocus=function(){};window.addEventListener&&window.addEventListener("focus",b._BubbledFocus,!0);b._GetKeyEventProperties=function(a){var d={},a=b._GetEventObject(a);if(!a||!0===a.cancelBubble)return null;if(a.target)d.Ltarg=a.target;
else if(a.srcElement)d.Ltarg=a.srcElement;else return null;3==d.Ltarg.nodeType&&(d.Ltarg=d.Ltarg.parentNode);if(a.keyCode)d.Lcode=a.keyCode;else if(a.which)d.Lcode=a.which;else return null;d.Lmodifiers=(a.shiftKey?16:0)|(a.ctrlKey?32:0)|(a.altKey?64:0);d.LisVirtualKeyCode="undefined"!=typeof a.charCode&&null!=a.charCode&&(0==a.charCode||0!=(d.Lmodifiers&96));d.LisVirtualKey=d.LisVirtualKeyCode||"keypress"!=a.type;return d};b._SelectionChange=function(){if(b._IgnoreNextSelChange)b._IgnoreNextSelChange--;
else{var a=document.selection;if("control"!=a.type.toLowerCase()&&(a=a.createRange(),!b._Selection||!b._Selection.isEqual(a)))b._Selection=a,b._DeadKeys=[]}return!0};b._FindCaret=function(a){if(!a.createTextRange&&a.selectionStart){var d=document.createEvent("KeyboardEvent");if(d.initKeyEvent){d.initKeyEvent("keypress",!0,!0,null,!1,!1,!1,!1,0,32);var c=b._KeyPress;b._KeyPress=function(){};a.dispatchEvent(d);d=document.createEvent("KeyboardEvent");d.initKeyEvent("keypress",!0,!0,null,!1,!1,!1,!1,
8,0);a.dispatchEvent(d);b._KeyPress=c}}};b._NotifyKeyboard=function(a,d,c){null!=b._ActiveKeyboard&&"function"==typeof b._ActiveKeyboard.KNS&&b._ActiveKeyboard.KNS(a,d,c)};b._KeyDown=function(a){var d;b._KeyPressToSwallow=0;if(!b._Enabled||b._DisableInput||null==b._ActiveKeyboard||null!=b._ActiveControl&&!b._ActiveControl.LEnabled)return!0;var c=j.eventTarget(a);if(l.touchable){if(c&&"undefined"!=typeof c.kmwInput&&!1==c.kmwInput)return!0}else if(c&&0<=c.className.indexOf("kmw-disabled"))return!0;
if(!h.ready)return!0;c=b._GetKeyEventProperties(a);if(null==c)return!0;switch(c.Lcode){case 8:b._DeadKeys=[];break;case 16:case 17:case 18:return b._NotifyKeyboard(c.Lcode,c.Ltarg,1),h._UpdateVKShift(c,c.Lcode-15,1)}(d=c.Ltarg.ownerDocument)&&((d=d.selection)&&(33>c.Lcode||40<c.Lcode))&&d.createRange().select();!window.event&&b._VKMap_FF_IE["k"+c.Lcode]&&(c.Lcode=b._VKMap_FF_IE["k"+c.Lcode]);if(b._ActiveKeyboard.KM){if(8==c.Lcode)return b._KeyPressToSwallow=1,b.callKeyboardStartGroup(c.Ltarg,c)||
b.KO(1,b._LastActiveElement,""),!1;b._KeyPressToSwallow=0}else{var e=0;if((d=b._VKMap[h._BaseLayout])&&d["k"+c.Lcode])c.Lcode=d["k"+c.Lcode];"undefined"==typeof b._ActiveKeyboard.KM&&!(c.Lmodifiers&96)&&(d={Lcode:b._USKeyCodeToCharCode(c),Ltarg:c.Ltarg,Lmodifiers:0,LisVirtualKey:0},b.callKeyboardStartGroup(d.Ltarg,d)&&(e=1));e=e||b.callKeyboardStartGroup(c.Ltarg,c);8==c.Lcode&&(!e&&null!=c.Ltarg.className&&0<=c.Ltarg.className.indexOf("keymanweb-input"))&&b.KO(1,b._LastActiveElement,"")}!e&&(96<=
c.Lcode&&111>=c.Lcode)&&(b.KO(0,c.Ltarg,String._kmwFromCharCode(106>c.Lcode?c.Lcode-48:c.Lcode-64)),e=1);if(e)return b._FindCaret(c.Ltarg),a&&a.preventDefault&&a.preventDefault(),b._KeyPressToSwallow=a?a.keyCode:0,!1;b._KeyPressToSwallow=0;return 8==c.Lcode&&null!=c.Ltarg.className&&0<=c.Ltarg.className.indexOf("keymanweb-input")?!1:!0};b.callKeyboardStartGroup=function(a,d){b._CachedSelectionStart=null;b._DeadkeyResetMatched();b.cachedContext.reset();return b._ActiveKeyboard.gs(a,d)};b._KeyPress=
function(a){var d;if(!b._Enabled||b._DisableInput||null==b._ActiveKeyboard||null!=b._ActiveControl&&!b._ActiveControl.LEnabled)return!0;d=b._GetKeyEventProperties(a);if(null==d||d.LisVirtualKey)return!0;if(!b._ActiveKeyboard.KM){if(!b._KeyPressToSwallow||32>d.Lcode||b._BrowserIsSafari&&63232<d.Lcode&&63744>d.Lcode)return!0;if(a=b._GetEventObject(a))a.returnValue=!1;return!1}if(b._KeyPressToSwallow||b.callKeyboardStartGroup(d.Ltarg,d))return b._KeyPressToSwallow=0,a&&a.preventDefault&&a.preventDefault(),
b._FindCaret(d.Ltarg),!1;b._KeyPressToSwallow=0;return!0};b._KeyUp=function(a){a=b._GetKeyEventProperties(a);if(null==a||!h.ready)return!0;switch(a.Lcode){case 13:if("TEXTAREA"==a.Ltarg.nodeName)break;"search"==a.Ltarg.type||"submit"==a.Ltarg.type?a.Ltarg.form.submit():b.moveToNext(!1);return!0;case 16:case 17:case 18:return b._NotifyKeyboard(a.Lcode,a.Ltarg,0),h._UpdateVKShift(a,a.Lcode-15,1)}var d;if((d=a.Ltarg.ownerDocument)&&(d=d.selection)&&"control"!=d.type)d=d.createRange(),b._Selection=d;
return!1};b.moveToNext=function(a){var d,c=b.sortedInputs,e=b._ActiveElement;l.touchable&&(e=e.base);for(d=0;d<c.length&&c[d]!=e;d++);d=a?d-1:d+1;d>=c.length&&(d-=c.length);0>d&&(d+=c.length);l.touchable?(b.focusing=!0,a=c[d].kmw_ip,"undefined"==typeof a?c[d].focus():(b._ActiveElement=b._LastActiveElement=a,b.setTextCaret(a,1E4),b.scrollInput(a))):c[d].focus()};b.moveToElement=function(a){"string"==typeof a&&(a=document.getElementById(a));l.touchable&&a.kmw_ip?a.kmw_ip.focus():a.focus()};b._SetActiveKeyboard=
function(a,d,c){var e,g,i;i=2>arguments.length||!d?"---":d;for(e=0;e<b._KeyboardStubs.length&&!(a==b._KeyboardStubs[e].KI&&(i==b._KeyboardStubs[e].KLC||"---"==i));e++);if(l.touchable&&(""==a||null==a||e>=b._KeyboardStubs.length))a=b._KeyboardStubs[0].KI,i=b._KeyboardStubs[0].KLC;c&&b.saveCurrentKeyboard(a,i);if(!b._ActiveStub||!b._ActiveKeyboard||!(b._ActiveKeyboard.KI==a&&b._ActiveStub.KI==a&&b._ActiveStub.KLC==d&&""==l.app)){if(b._ActiveKeyboard&&b._ActiveKeyboard.KI==a)for(g=0;g<b._KeyboardStubs.length;g++)if(b._KeyboardStubs[g].KI==
a&&b._KeyboardStubs[g].KLC==d){b._ActiveStub=b._KeyboardStubs[g];h.appendStyleSheet();""!=l.app&&h._Load();return}b._ActiveKeyboard=null;b._ActiveStub=null;if(""==a)h._Hide(!1);else{for(g=0;g<b._Keyboards.length;g++)if(b._Keyboards[g].KI==a){b._ActiveKeyboard=b._Keyboards[g];b._SetTargDir(b._LastActiveElement);for(e=0;e<b._KeyboardStubs.length;e++)if(b._KeyboardStubs[e].KI==a&&b._KeyboardStubs[e].KLC==d){b._ActiveStub=b._KeyboardStubs[e];break}break}if("undefined"==d||""==d)d="---";if(null==b._ActiveKeyboard){for(g=
0;g<b._KeyboardStubs.length;g++)if(b._KeyboardStubs[g].KI==a&&(b._KeyboardStubs[g].KLC==d||"---"==d)){if(b.isCJK(b._KeyboardStubs[g])||l.touchable)h._Enabled=1;if(null==b._LoadingInternalName||b._LoadingInternalName!=a)h.ready&&h._Hide(!1),b._LoadingInternalName=a,null!=b.loadTimer&&window.clearTimeout(b.loadTimer),b.loadTimer=null,b.loadTimer=""!=l.app?null:window.setTimeout(function(){j.wait(!1);var a=b._KeyboardStubs[g],c=a.KN,a=a.KL,c=c.replace(/\s*keyboard\s*/i,"");j.alert("Sorry, the "+c+" keyboard for "+
a+" is not currently available!",b.setDfltKeyboard)},1E4),e="Installing keyboard<br/>"+b._KeyboardStubs[g].KN.replace(/\s*keyboard\s*/i,""),j.wait(e),window.setTimeout(function(){b.installKeyboard(b._KeyboardStubs[g])},0);b._ActiveStub=b._KeyboardStubs[g];return}b._SetTargDir(b._LastActiveElement)}e=b._ActiveKeyboard;null!==e&&String.kmwEnableSupplementaryPlane(e&&(e.KS&&1==e.KS||"Hieroglyphic"==e.KN));h._Load()}}};b.installKeyboard=function(a){var d=j._CreateElement("SCRIPT");d.charset="UTF-8";a=
a.KF;""==l.app?/^(([.]\/)|([.][.]\/)|(\/))|(:)/.test(a)||(a=b.options.keyboards+a):a=j.myPath()+"languages/"+a;d.src=a;d.type="text/javascript";try{document.body.appendChild(d)}catch(c){document.getElementsByTagName("head")[0].appendChild(d)}};b.setDfltKeyboard=function(){b._SetActiveKeyboard("Keyboard_us","eng",!0);b.doKeyboardChange("Keyboard_us","eng",!0)};b.isCJK=function(a){var d=b._ActiveKeyboard,c="";0<arguments.length&&(d=a);d&&("undefined"!=typeof d.KLC?c=d.KLC:"undefined"!=typeof d.LanguageCode&&
(c=d.LanguageCode));return"cmn"==c||"jpn"==c||"kor"==c};b.isCJK=b.isCJK;b.setActiveKeyboard=function(a,d){b.doBeforeKeyboardChange(a,d);b._SetActiveKeyboard(a,d,!0);null!=b._LastActiveElement&&b._FocusLastActiveElement();b.doKeyboardChange(a,d)};b.getActiveKeyboard=function(){return null==b._ActiveKeyboard?"":b._ActiveKeyboard.KI};b.getActiveLanguage=function(){return null==b._ActiveStub?"":b._ActiveStub.KLC};b.getKeyboard=function(a,d){var c,e;for(c=0;c<b._KeyboardStubs.length;c++)if(e=b._GetKeyboardDetail(b._KeyboardStubs[c]),
e.InternalName==a&&(2>arguments.length||e.LanguageCode==d))return e;return null};b.GetKeyboardDetail=function(a){for(var d=b.getKeyboards(),c=0;c<d.length;c++)if(d[c].InternalName==a)return d[c];return null};b._GetKeyboardDetail=function(a){var b=[];b.Name=a.KN;b.InternalName=a.KI;b.LanguageName=a.KL;b.LanguageCode=a.KLC;b.RegionName=a.KR;b.RegionCode=a.KRC;b.CountryName=a.KC;b.CountryCode=a.KCC;b.KeyboardID=a.KD;b.Font=a.KFont;b.OskFont=a.KOskFont;return b};b.getKeyboards=function(){var a=[],d,c;
for(d=0;d<b._KeyboardStubs.length;d++)c=b._KeyboardStubs[d],c=b._GetKeyboardDetail(c),a=b._push(a,c);return a};b._WindowUnload=function(){var a,d;for(a=0;a<b._EventHandlers.length;a++){d=b._EventHandlers[a];try{d.Lelem.detachEvent?d.Lelem.detachEvent("on"+d.Lname,d.Lhandler):d.Lelem.removeEventListener(d.Lname,d.Lhandler,d.LuseCapture),d.Lhandler==b._ControlFocus&&(d.Lelem.onkeypress=d.Lelem.onkeydown=d.Lelem.onkeyup=null)}catch(c){}d.Lelem=0}b.doUnloadUI();h.ready&&h._Unload();b._EventHandlers=b._LastActiveElement=
0};j.attachDOMEvent(window,"load",function(){document.body.scrollTop=0;"undefined"!=typeof document.documentElement&&(document.documentElement.scrollTop=0)},!1);j.attachDOMEvent(window,"unload",b._WindowUnload,!1);b._AttachToControls=function(a){for(var d=a.getElementsByTagName("INPUT"),c=a.getElementsByTagName("TEXTAREA"),e=a.getElementsByTagName("IFRAME"),a=document.evaluate?document.evaluate('//*[@contenteditable and @contenteditable != "false"]',document,null,XPathResult.ANY_TYPE,null):null,g=
0;g<d.length;g++)"text"==d[g].type.toLowerCase()&&b.attachToControl(d[g]);for(g=0;g<c.length;g++)b.attachToControl(c[g]);for(g=0;g<e.length;g++)try{e[g].contentWindow.document&&b._AttachToIframe(e[g])}catch(i){}if(a)for(d=a.iterateNext();d;d=a.iterateNext())b.attachToControl(d);for(g=0;g<b.inputList.length;g++)b.attachToControl(b.inputList[g])};a=document.getElementsByTagName("script");b.srcPath=a[a.length-1].src;b.init=b.init=function(a){if("undefined"==typeof b.options.resources){var d="",c="",
e="",g="";"string"==typeof window.KeymanWeb_Root&&(d=window.KeymanWeb_Root);"string"==typeof window.KeymanWeb_Resources&&(e=window.KeymanWeb_Resources);"string"==typeof window.KeymanWeb_Keyboards&&(g=window.KeymanWeb_Keyboards);"string"==typeof window.KeymanWeb_FontUriBasePath&&(c=window.KeymanWeb_FontUriBasePath);var i={};i.root=d;i.resources=e;i.keyboards=g;i.fonts=c;i.key="";i.attachType=l.touchable?"manual":"auto";i.controlDownColor="#e0e0e0";i.keyDownColor="#c0c0ff";i.keyHoverColor="#e0e0ff";
i.unmappedKeyboardName="English";i.defaultKeyboardHelp="Please wait while keyboard loads...";i.ui=l.touchable?"none":"";i.app="";b.options=i}else i=b.options;if(0<arguments.length&&"object"==typeof a&&null!=a)for(var s in i)a.hasOwnProperty(s)&&(i[s]=a[s]);""==i.root&&(i.root=j.myPath());""==i.resources&&(i.resources=i.root+"engine/"+b.build+"/");""==i.keyboards&&(i.keyboards=i.root+"kbd/");""==i.fonts&&(i.fonts=i.root+"font/");i.resources=j.fixPath(i.resources);i.keyboards=j.fixPath(i.keyboards);
i.fonts=j.fixPath(i.fonts);""!=i.app&&(l.touchable=!0,l.formFactor="phone",l.app=i.app,b.options.attachType=i.attachType="manual",navigator&&(navigator.userAgent&&0<=navigator.userAgent.indexOf("iPad"))&&(l.formFactor="tablet"),0<=l.app.indexOf("Mobile")&&(l.formFactor="phone"),0<=l.app.indexOf("Tablet")&&(l.formFactor="tablet"),l.browser="native");window.KeymanWeb_AttachType=i.attachType;window.KeymanWeb_ControlDownColor=i.controlDownColor;window.KeymanWeb_KeyDownColor=i.keyDownColor;window.KeymanWeb_KeyHoverColor=
i.keyHoverColor;window.KeymanWeb_DefaultKeyboardName=i.defaultKeyboardName;window.KeymanWeb_DefaultKeyboardHelp=i.defaultKeyboardHelp;window.KeymanWeb_Key=i.key;if(!b.initialized)if("complete"!==document.readyState)window.setTimeout(function(){b.init(a)},50);else{b._MasterDocument=window.document;if(l.touchable){c=document.getElementsByTagName("textarea");e=document.getElementsByTagName("input");for(d=0;d<c.length;d++)if(g=c[d],i=g.className,g.kmwInput=!1,(!i||0>i.indexOf("kmw-disabled"))&&!g.readOnly)g.disabled=
!0,g.kmwInput=!0;for(d=0;d<e.length;d++)if(g=e[d],i=g.className,g.kmwInput=!1,(!i||0>i.indexOf("kmw-disabled"))&&!g.readOnly)if("text"==g.type||"search"==g.type)g.disabled=!0,g.kmwInput=!0}"Android"==l.OS&&(l.dpi=j.getDPI(),l.formFactor=screen.height<4*l.dpi||screen.width<4*l.dpi?"phone":"tablet");h.noShow=function(){};window.removeEventListener&&window.removeEventListener("focus",b._BubbledFocus,!0);"manual"!=b.options.attachType&&b._AttachToControls(document);b.initialized=1;l.touchable||b.loadUI();
h.prepare();for(d=0;d<b.deferredKRS.length;d++)b.KRS(b.deferredKRS[d]);b.initializeUI();j.prepareWait();for(d=0;d<b.deferredKR.length;d++)b.KR(b.deferredKR[d]);""==b.options.app&&(b.appliedFont=b.baseFont=b.getBaseFont(),b.listInputs(),l.touchable?b.setupTouchDevice():b.setupDesktopPage(),6==j._GetIEVersion()&&(h.shim=j.createShim()),l.touchable&&(h._Box.ontouchend=function(a){a.stopPropagation()},d=document.createElement("DIV"),c=d.style,c.width="100%",c.height=screen.width/2+"px",document.body.appendChild(d),
"Android"==l.OS&&0<navigator.userAgent.indexOf("Chrome")&&(b.hideOskWhileScrolling=function(a){if(typeof h._Box!="undefined"&&typeof h._Box.style!="undefined"){a=a.target.parentNode;if(typeof a!="undefined"&&a!=null){if(a.className.indexOf("keymanweb-input")>=0||a.className.indexOf("kmw-key-")>=0)return;if(typeof a.parentNode!="undefined"){a=a.parentNode;if(a.className.indexOf("keymanweb-input")>=0||a.className.indexOf("kmw-key-")>=0)return}}h.hideNow()}},document.body.addEventListener("touchstart",
b.hideOskWhileScrolling,!1))),h.shim&&document.body.appendChild(h.shim),document.selection&&!b.legacy&&j.attachDOMEvent(document,"selectionchange",b._SelectionChange),"manual"!=b.options.attachType&&(document.attachEvent?document.attachEvent("onfocusin",b._IEFocusIn):document.addEventListener&&document.addEventListener("DOMNodeInserted",b._DOMNodeInserted,!0)),b.restoreCurrentKeyboard(),b.initialized=2)}};b.listInputs=function(){var a,d=[],c=document.getElementsByTagName("INPUT"),e=document.getElementsByTagName("TEXTAREA");
for(a=0;a<c.length;a++)switch(c[a].type){case "text":case "search":case "email":case "url":0>c[a].className.indexOf("kmw-disabled")&&d.push({ip:c[a],x:j._GetAbsoluteX(c[a]),y:j._GetAbsoluteY(c[a])})}for(a=0;a<e.length;a++)0>e[a].className.indexOf("kmw-disabled")&&d.push({ip:e[a],x:j._GetAbsoluteX(e[a]),y:j._GetAbsoluteY(e[a])});d.sort(function(a,b){return a.y!=b.y?a.y-b.y:a.x-b.x});c=[];for(a=0;a<d.length;a++)c.push(d[a].ip);b.sortedInputs=c};b.loadUI=function(){var a=b.ui.name,d=b.options;if("string"!=
typeof a||""==a){a="";"string"==typeof d.ui?a=d.ui:"undefined"!=typeof d.ui.name&&(a=d.ui.name);for(var c=document.getElementsByTagName("SCRIPT"),e=0;e<c.length;e++)"kmw-ui-script"==c[e].id&&(a="");""!=a&&(c=j._CreateElement("SCRIPT"),c.id="kmw-ui-script",a=d.resources+("ui/"+a+"/")+("kmwui"+a+"-release.js"),c.src=a,c.type="text/javascript",c.charset="UTF-8",document.body.appendChild(c))}};b.initializeUI=function(){"function"==typeof b.ui.initialize?(b.ui.initialize(),h._Show()):window.setTimeout(b.initializeUI,
1E3)};b._SelPos=function(a){var d,c=999>j._GetIEVersion();if(l.touchable)return b.getTextCaret(a);if(a._KeymanWebSelectionStart)return a._KeymanWebSelectionStart;if(a.setSelectionRange)return a.value.substr(0,a.selectionStart)._kmwLength();if((d=a.ownerDocument)&&(d=d.defaultView)&&d.getSelection&&"on"==a.ownerDocument.designMode.toLowerCase()){if(a=d.getSelection(),3==a.focusNode.nodeType)return a.focusNode.substringData(0,a.focusOffset)._kmwLength()}else if(c){if("string"==typeof a.value)return d=
b.getInputSelection(a),a.value.substr(0,d.start)._kmwLength();if(a=a.body?a:a.ownerDocument)d=a.selection;else return 0;a=d.createRange();a.moveStart("textedit",-1);return a.text._kmwLength()}return 0};b.getInputSelection=function(a){var b=0,c=0,e="",g,i=0;if("number"==typeof a.selectionStart&&"number"==typeof a.selectionEnd)b=a.selectionStart,c=a.selectionEnd;else if((g=document.selection.createRange())&&g.parentElement()==a)i=a.value.length,e=a.value.replace(/\r\n/g,"\n"),c=a.createTextRange(),
c.moveToBookmark(g.getBookmark()),a=a.createTextRange(),a.collapse(!1),-1<c.compareEndPoints("StartToEnd",a)?b=c=i:(b=-c.moveStart("character",-i),b+=e.slice(0,b).split("\n").length-1,-1<c.compareEndPoints("EndToEnd",a)?c=i:(c=-c.moveEnd("character",-i),c+=e.slice(0,c).split("\n").length-1));return{start:b,end:c}};b._DeadkeyResetMatched=function(){var a,d=b._DeadKeys;for(a=0;a<d.length;a++)d[a].matched=0};b._DeadkeyDeleteMatched=function(){var a,d=b._DeadKeys;for(a=0;a<d.length;a++)d[a].matched&&
d.splice(a,1)};b._DeadkeyAdjustPos=function(a,d){var c,e=b._DeadKeys;for(c=0;c<e.length;c++)e[c].p>a&&(e[c].p+=d)};b._SetTargDir=function(a){var d=null!=b._ActiveKeyboard&&b._ActiveKeyboard.KRTL?"rtl":"ltr";a&&""==l.app&&(l.touchable?0==a.textContent.length&&(a.base.dir=a.dir=d,b.setTextCaret(a,1E4)):0==a.value.length&&(a.dir=d))};b._IEFocusIn=function(){var a=b._GetEventObject(null);a&&(a=a.srcElement,null!=a&&!b._IsAttached(a)&&("input"==a.tagName.toLowerCase()&&"text"==a.type.toLowerCase()||"textarea"==
a.tagName.toLowerCase()||"iframe"==a.tagName.toLowerCase())&&b.attachToControl(a))};b._DOMNodeInserted=function(a){a=a.target;null!=a&&1==a.nodeType&&b._AttachToControls(a)};b._ResetVKShift=function(){b._IsActivatingKeymanWebUI||h._UpdateVKShift&&h._UpdateVKShift(null,15,0)};b.addHotKey=b.addHotKey=function(a,d,c){for(var e=0;e<b._HotKeys.length;e++)if(b._HotKeys[e].Code==a&&b._HotKeys[e].Shift==d){b._HotKeys[e].Handler=c;return}b._HotKeys.push({Code:a,Shift:d,Handler:c})};b.removeHotKey=b.removeHotKey=
function(a,d){for(var c=0;c<b._HotKeys.length;c++)if(b._HotKeys[c].Code==a&&b._HotKeys[c].Shift==d){b._HotKeys.splice(c,1);break}};b._ProcessHotKeys=function(a){a||(a=window.event);if(a.keyCode)var d=a.keyCode;else if(a.which)d=a.which;else return 0;for(var c=(a.shiftKey?16:0)|(a.ctrlKey?32:0)|(a.altKey?64:0),e=0;e<b._HotKeys.length;e++)if(d==b._HotKeys[e].Code&&c==b._HotKeys[e].Shift)return b._HotKeys[e].Handler(),a.returnValue=0,a&&a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,!1;return!0};
j.attachDOMEvent(document,"keyup",b._ProcessHotKeys,!1);b.saveCurrentKeyboard=function(a,b){j.saveCookie("KeymanWeb_Keyboard",{current:a+":"+b})};b.restoreCurrentKeyboard=function(){var a=b._KeyboardStubs,d,c=a.length;if(!(1>a.length)){d=b.getSavedKeyboard();var e=d.split(":"),e=d.split(":");2>e.length&&(e[1]="");for(d=0;d<c&&!(a[d].KI==e[0]&&(a[d].KLC==e[1]||""==e[1]));d++);if(d<c||null==b._ActiveKeyboard)b._SetActiveKeyboard(e[0],e[1],!1),b.doKeyboardChange(e[0],e[1])}};b.getSavedKeyboard=b.getSavedKeyboard=
function(){var a=j.loadCookie("KeymanWeb_Keyboard");if("string"!=typeof a.current)return"Keyboard_us:eng";var d,c=b._KeyboardStubs,e;for(d=0;d<c.length;d++)if(e=c[d].KI+":"+c[d].KLC,e==a.current)return e;for(d=0;d<c.length;d++)if(e=c[d].KI+":"+c[d].KLC,"Keyboard_us:eng"==e)return e;return 0<c.length?c[0].KI+":"+c[0].KLC:"Keyboard_us:eng"};b.addEventListener=function(a,b){return j.addEventListener("kmw."+a,b)};j.attachDOMEvent(window,"focus",b._ResetVKShift,!1);j.attachDOMEvent(window,"blur",b._ResetVKShift,
!1);b.resizeView=function(){b.alignInputs(!0)};b.rotateDevice=function(){h.hideLanguageList();h._Visible&&(h.adjustHeights(),"phone"==l.formFactor&&"Android"==l.OS&&window.setTimeout(function(){window.scrollTo(0,1)},1E3))};l.touchable&&""==l.app&&(j.attachDOMEvent(window,"orientationchange",b.rotateDevice),"onmozorientationchange"in screen&&j.attachDOMEvent(screen,"mozorientationchange",b.rotateDevice),"Android"==l.OS&&j.attachDOMEvent(window,"resize",b.resizeView));String.kmwEnableSupplementaryPlane(!1)})();(function(){var b=window.tavultesoft.keymanweb,h={K_BKSP:8,K_TAB:9,K_ENTER:13,K_SHIFT:16,K_CONTROL:17,K_ALT:18,K_PAUSE:19,K_CAPS:20,K_ESC:27,K_SPACE:32,K_PGUP:33,K_PGDN:34,K_END:35,K_HOME:36,K_LEFT:37,K_UP:38,K_RIGHT:39,K_DOWN:40,K_SEL:41,K_PRINT:42,K_EXEC:43,K_INS:45,K_DEL:46,K_HELP:47,K_0:48,K_1:49,K_2:50,K_3:51,K_4:52,K_5:53,K_6:54,K_7:55,K_8:56,K_9:57,K_A:65,K_B:66,K_C:67,K_D:68,K_E:69,K_F:70,K_G:71,K_H:72,K_I:73,K_J:74,K_K:75,K_L:76,K_M:77,K_N:78,K_O:79,K_P:80,K_Q:81,K_R:82,K_S:83,K_T:84,K_U:85,
K_V:86,K_W:87,K_X:88,K_Y:89,K_Z:90,K_NP0:96,K_NP1:97,K_NP2:98,K_NP3:99,K_NP4:100,K_NP5:101,K_NP6:102,K_NP7:103,K_NP8:104,K_NP9:105,K_NPSTAR:106,K_NPPLUS:107,K_SEPARATOR:108,K_NPMINUS:109,K_NPDOT:110,K_NPSLASH:111,K_F1:112,K_F2:113,K_F3:114,K_F4:115,K_F5:116,K_F6:117,K_F7:118,K_F8:119,K_F9:120,K_F10:121,K_F11:122,K_F12:123,K_NUMLOCK:144,K_SCROLL:145,K_LSHIFT:160,K_RSHIFT:161,K_LCONTROL:162,K_RCONTROL:163,K_LALT:164,K_RALT:165,K_COLON:186,K_EQUAL:187,K_COMMA:188,K_HYPHEN:189,K_PERIOD:190,K_SLASH:191,
K_BKQUOTE:192,K_LBRKT:219,K_BKSLASH:220,K_RBRKT:221,K_QUOTE:222,K_oE2:226,K_LOPT:50001,K_ROPT:50002,K_NUMERALS:50003,K_SYMBOLS:50004,K_CURRENCIES:50005,K_UPPER:50006,K_LOWER:50007,K_ALPHA:50008,K_SHIFTED:50009,K_ALTGR:50010,K_TABBACK:50011,K_TABFWD:50012},j=[["0123456789",";=,-./`","[\\]'"],[")!@#$%^&*(",":+<_>?~",'{|}"']],l="K_BKQUOTE K_1 K_2 K_3 K_4 K_5 K_6 K_7 K_8 K_9 K_0 K_HYPHEN K_EQUAL K_* K_* K_* K_Q K_W K_E K_R K_T K_Y K_U K_I K_O K_P K_LBRKT K_RBRKT K_BKSLASH K_* K_* K_* K_A K_S K_D K_F K_G K_H K_J K_K K_L K_COLON K_QUOTE K_* K_* K_* K_* K_* K_oE2 K_Z K_X K_C K_V K_B K_N K_M K_COMMA K_PERIOD K_SLASH K_* K_* K_* K_* K_* K_SPACE".split(" "),
a=b.osk,f=b.util,d=f.device;a._Box=null;a._DivVKbd=null;a._DivVKbdHelp=null;a._Visible=0;a._Enabled=1;a._VShift=[];a._VKeySpans=[];a._VKeyDown=null;a._VKbdContainer=null;a._VOriginalWidth=1;a._BaseLayout="us";a._BaseLayoutEuro={};a._BaseLayoutEuro.se="\u00a71234567890+\u00b4~~~QWERTYUIOP\u00c5\u00a8'~~~ASDFGHJKL\u00d6\u00c4~~~~~<ZXCVBNM,.-~~~~~ ";a._BaseLayoutEuro.uk="`1234567890-=~~~QWERTYUIOP[]#~~~ASDFGHJKL;'~~~~~\\ZXCVBNM,./~~~~~ ";a.lgTimer=null;a.lgKey=null;a.hkKey=null;a.spaceBar=null;a.lgList=
null;a.frameColor="#ad4a28";a.keyPending=null;a.fontFamily="";a.fontSize="1em";a.layout=null;a.layers=null;a.layerId="default";a.nextLayer="default";a.layerIndex=0;a.currentKey="";a.subkeyDelayTimer=null;a.popupPending=!1;a.styleSheet=null;a.loadRetry=0;a.x=99;a.y=0;a.width=1;a.height=1;a.rowHeight=1;a.nRows=1;a.vpScale=1;a.closeButton=null;a.resizeIcon=null;a.resizing=0;a.pinImg=null;a.userPositioned=0;a.dfltX="";a.dfltY="";a.noDrag=!1;a.shim=null;a.keytip=null;a.touchY=0;a.addEventListener=function(a,
b){return f.addEventListener("osk."+a,b)};a._TitleBarInterior=function(){var c=f._CreateElement("DIV"),e=c.style;e.paddingLeft="2px";e.cursor="move";e.background="#ad4a28";e.font="8pt Tahoma,Arial,sans-serif";e=f._CreateElement("DIV");e.className="kmw-title-bar-actions";e.onmousedown=a._CancelMouse;var g=f._CreateElement("DIV");g.className="kmw-close-button";g.onmousedown=a._CancelMouse;g.onclick=function(){a._Hide(!0)};a.closeButton=g;e.appendChild(g);a.restorePosition=function(){a._Visible&&(b._FocusLastActiveElement(),
a.loadCookie(),a.userPositioned=!1,a.saveCookie(),a._Show(),a.doResizeMove());a.pinImg&&(a.pinImg.style.display="none");window.event&&(window.event.returnValue=!1)};g=a.pinImg=f._CreateElement("DIV");g.className="kmw-pin-image";g.title="Pin the On Screen Keyboard to its default location on the active text box";g.onclick=a.restorePosition;g.onmousedown=a._CancelMouse;g.style.display="none";d.touchable||e.appendChild(g);c.appendChild(e);g=b._TitleElement=f._CreateElement("SPAN");g.className="kmw-title-bar-caption";
g.innerHTML="Tavultesoft KeymanWeb";c.appendChild(g);return c};a.isEnabled=a.isEnabled=function(){return a._Enabled};a.isVisible=a.isVisible=function(){return a._Visible};a.getRect=a.getRect=function(){var b={};a._DivVKbd?(b.left=b.left=f._GetAbsoluteX(a._DivVKbd),b.top=b.top=f._GetAbsoluteY(a._DivVKbd),b.width=b.width=f._GetAbsoluteX(a._DivVKbdHelp)-f._GetAbsoluteX(a._DivVKbd)+a._DivVKbdHelp.offsetWidth,b.height=b.height=f._GetAbsoluteY(a._DivVKbdHelp)-f._GetAbsoluteY(a._DivVKbd)+a._DivVKbdHelp.offsetHeight):
(b.left=b.left=f._GetAbsoluteX(a._Box),b.top=b.top=f._GetAbsoluteY(a._Box),b.width=b.width=f._GetAbsoluteX(a._Box)+a._Box.offsetWidth,b.height=b.height=f._GetAbsoluteY(a._Box)+a._Box.offsetHeight);return b};a.setRect=a.setRect=function(b){if(!(null==a._Box||"desktop"!=d.formFactor)){var e=a._Box,g=e.style;"left"in b&&(g.left=b.left-f._GetAbsoluteX(e)+e.offsetLeft+"px",a.dfltX=g.left);"top"in b&&(g.top=b.top-f._GetAbsoluteY(e)+e.offsetTop+"px",a.dfltY=g.top);if(null!=a._DivVKbd){var i=a._DivVKbd,g=
i.style;if("width"in b){var h=b.width-(e.offsetWidth-i.offsetWidth);h<0.2*screen.width&&(h=0.2*screen.width);h>0.9*screen.width&&(h=0.9*screen.width);g.width=h+"px";a.width=h}"height"in b&&(e=b.height-(e.offsetHeight-i.offsetHeight),e<0.1*screen.height&&(e=0.1*screen.height),e>0.5*screen.height&&(e=0.5*screen.height),g.height=e+"px",g.fontSize=e/8+"px",a.height=e);"nosize"in b&&a.resizeIcon&&(a.resizeIcon.style.display=b.nosize?"none":"block")}"nomove"in b&&(a.noDrag=b.nomove,a.pinImg&&(a.pinImg.style.display=
b.nomove||!a.userPositioned?"none":"block"));a.saveCookie()}};a.getPos=function(){var b=a._Box,e={};e.left=a._Visible?b.offsetLeft:a.x;e.top=a._Visible?b.offsetTop:a.y;return e};a.setPos=a.setPos=function(b){if(!("undefined"==typeof a._Box||d.touchable)){if(a.userPositioned){var e=b.left,b=b.top;"undefined"!=typeof e&&(e<-0.8*a._Box.offsetWidth&&(e=-0.8*a._Box.offsetWidth),a.userPositioned&&(a._Box.style.left=e+"px",a.x=e));"undefined"!=typeof b&&(0>b&&(b=0),a.userPositioned&&(a._Box.style.top=b+
"px",a.y=b))}a.pinImg&&(a.pinImg.style.display=a.userPositioned?"block":"none")}};a._VKeyGetTarget=function(a){a=b._GetEventObject(a);if(!a)return null;if(a.target)a=a.target;else if(a.srcElement)a=a.srcElement;else return null;3==a.nodeType&&(a=a.parentNode);"SPAN"==a.tagName&&(a=a.parentNode);return a};a.touchKey=function(c,e){e.preventDefault();e.cancelBubble=!0;"function"==typeof e.stopImmediatePropagation?e.stopImmediatePropagation():"function"==typeof e.stopPropagation&&e.stopPropagation();
if(!("object"==typeof e.touches&&1<e.touches.length)){a.touchY="object"==typeof e.touches?e.touches[0].clientY:e.clientY;var g=c.id.split("-")[1];"K_LOPT"==g||"K_ROPT"==g?(a.highlightKey(c,!0),window.setTimeout(function(){a.clickKey(c)},0)):"K_BKSP"==g?(a.highlightKey(c,!0),b.KO(1,b._LastActiveElement,""),a.deleting=!0,window.setTimeout(a.repeatDelete,500)):null==a.keyPending&&(a.keyPending=c,a.highlightKey(c,!0),g=""==d.app?500:100,null!=c.subKeys&&(a.subkeyDelayTimer=window.setTimeout(function(){a.showSubKeys(c)},
g)))}};a.repeatDelete=function(){a.deleting&&(b.KO(1,b._LastActiveElement,""),window.setTimeout(a.repeatDelete,200))};a.highlightKey=function(b,e,g){var i=b.className,h=2<arguments.length?" "+arguments[2]:" kmw-key-touched";""!=i&&(0<=i.indexOf(h)?e||(b.className=i.replace(h,"")):e&&(b.className=i+h));if(""==d.app){if(null!=a.keytip)if(e){if(0<b.className.indexOf("kmw-key-default")&&0>b.id.indexOf("K_SPACE")&&0>b.id.indexOf("popup")){var k=b.firstChild,j=a.keytip,i=j.style;j.textContent=k.textContent;
i.fontFamily=f.getStyleValue(k,"font-family");h=f.getStyleInt(k,"font-size");0!=h&&(i.fontSize=1.5*h+"px");h=f._GetAbsoluteX(b);f._GetAbsoluteY(b);var n=b.offsetWidth,r=1.5*k.offsetWidth+f.getStyleInt(j,"padding-left")+f.getStyleInt(j,"padding-right"),q=f.getStyleInt(b,"margin-right"),k=1.5*k.offsetHeight+f.getStyleInt(j,"padding-top")+f.getStyleInt(j,"padding-bottom"),j=f.getStyleInt(b,"margin-top");i.left=h-q+(n-r)/2+"px";i.top=f._GetAbsoluteY(b)-j-a._Box.offsetTop-k+"px";i.display="block"}}else a.keytip.style.display=
"none"}else"function"==typeof window.oskCreateKeyPreview&&(e?(i=f._GetAbsoluteX(b)-f._GetAbsoluteX(a._DivVKbd)+b.offsetWidth/2,h=f._GetAbsoluteY(b)-f._GetAbsoluteY(a._DivVKbd),0<=b.className.indexOf("kmw-key-default")&&0>b.id.indexOf("K_SPACE")&&window.oskCreateKeyPreview(i,h,b.offsetWidth,b.offsetHeight,b.firstChild.innerHTML)):window.oskClearKeyPreview())};a.moveOverKeys=function(b,e){e.preventDefault();e.cancelBubble=!0;"function"==typeof e.stopImmediatePropagation?e.stopImmediatePropagation():
"function"==typeof e.stopPropagation&&e.stopPropagation();if(null!=a.keyPending){var g="object"==typeof e.touches?e.touches[0].clientX:e.clientX,i="object"==typeof e.touches?e.touches[0].clientY:e.clientY,h=f._GetAbsoluteX(b),k=f._GetAbsoluteY(b),j=h+b.offsetWidth,n=k+b.offsetHeight,r=b.id.split("-")[1],q=g>h&&g<j&&i>k&&i<n;if(""==d.app){if("K_LOPT"!=r&&"K_ROPT"!=r&&a.highlightKey(b,q),null!=b.subKeys){var o,l;l=document.getElementById("kmw-popup-keys");5<a.touchY-i&&null==l&&(a.subkeyDelayTimer&&
window.clearTimeout(a.subkeyDelayTimer),a.showSubKeys(b),l=document.getElementById("kmw-popup-keys"));for(r=0;r<b.subKeys.length;r++)try{o=l.childNodes[r].firstChild,h=f._GetAbsoluteX(o),k=f._GetAbsoluteY(o),j=h+o.offsetWidth,n=k+o.offsetHeight,q=g>h&&g<j&&i>k&&i<n,a.highlightKey(o,q),q&&a.highlightKey(b,!1)}catch(u){}}}else a.highlightKey(b,q)}};a.showSubKeys=function(b){if(null!=a.keyPending){var e=document.createElement("DIV"),g,i,h,k,j,n;e.id="kmw-popup-keys";g=e.style;g.bottom=parseInt(b.style.bottom,
10)+parseInt(b.style.height,10)+10+"px";g.fontFamily=a.fontFamily;g.fontSize=f.getStyleValue(b,"font-size");g.visibility="hidden";var l=b.subKeys.length,q,o;q=Math.min(Math.ceil(l/9),2);o=Math.ceil(l/q);1<q&&(g.width=o*b.offsetWidth+5*o+"px");for(g=0;g<l;g++)i=b.subKeys[g],j=document.createElement("DIV"),j.className="kmw-key-square-ex",j.keyId=i.id,h=j.style,k=Math.floor(g/o),1<q&&0<k&&(h.marginTop="5px"),j.width="undefined"!=typeof i.width?h.width=parseInt(i.width,10)*b.offsetWidth/100+"px":h.width=
b.offsetWidth+"px",h.height=b.offsetHeight+"px",n=document.createElement("DIV"),a.setButtonClass(i,n),n.id="string"==typeof i.layer&&""!=i.layer?"popup-"+i.layer+"-"+i.id:"popup-default-"+i.id,k=n.style,k.height=h.height,k.width=h.width,k.boxSizing=k.MozBoxSizing="border-box",k.position="absolute",h=f._CreateElement("SPAN"),h.className="kmw-key-text",null==i.text||""==i.text?(h.innerHTML="\u00a0","string"==typeof i.id&&/^U_[0-9A-F]{4}$/i.test(i.id)&&(h.innerHTML=String.fromCharCode(parseInt(i.id.substr(2),
16)))):h.innerHTML=i.text,k.overflow="hidden",k.border="1px solid #888888",k.webkitTapHighlightColor="rgba(0,0,0,0)",k=h.style,k.fontSize=a.fontSize,"string"==typeof i.font&&""!=i.font&&(k.fontFamily=i.font),"string"==typeof i.fontsize&&0!=i.fontsize&&(k.fontSize=i.fontsize),n.appendChild(h),j.appendChild(n),e.appendChild(j);""!=d.app&&"function"==typeof window.oskCreatePopup?(e=f._GetAbsoluteX(b)-f._GetAbsoluteX(a._DivVKbd)+b.offsetWidth/2,h=f._GetAbsoluteY(b)-f._GetAbsoluteY(a._DivVKbd),a.popupPending=
!0,window.oskCreatePopup(b.subKeys,e,h)):(a._Box.appendChild(e),g=e.style,l=f._GetAbsoluteX(b)+0.5*(b.offsetWidth-e.offsetWidth),h=(f.landscapeView()?screen.height:screen.width)-e.offsetWidth,l>h&&(l=h),0>l&&(l=0),g.left=l+"px",h=document.createElement("DIV"),h.className="arrow-border",k=h.style,l=f._GetAbsoluteX(b)+0.5*b.offsetWidth-16,q=e.offsetTop+e.offsetHeight-1,k.left=l+"px",k.top=q+"px",b=document.createElement("DIV"),b.className="arrow-content",k=b.style,k.left=l+1+"px",k.top=q-1+"px",h.appendChild(b),
e.appendChild(h),g.visibility="visible")}};a.getVKDictionaryCode=function(a){if(!b._ActiveKeyboard.VKDictionary){var e=[];if("string"==typeof b._ActiveKeyboard.KVKD)for(var d=b._ActiveKeyboard.KVKD.split(" "),f=0;f<d.length;f++)e[d[f]]=f+256;b._ActiveKeyboard.VKDictionary=e}return(a=b._ActiveKeyboard.VKDictionary[a])?a:0};a.clickKey=function(c){var e=b._LastActiveElement,g,f,s,k=c.id.split("-");if(2>k.length)return!0;"popup"==k[0]&&k.splice(0,1);if(null!=e){var m=k[0],k=k[1];g=f=a.getModifierState(a.layerId);
"undefined"!=typeof c.key&&(g=c.key.nextlayer);null==b._ActiveElement&&(b._ActiveElement=e);switch(k){case "K_LSHIFT":case "K_RSHIFT":case "K_SHIFT":return a.highlightKey(c,!1),a.updateLayer(g?g:"shift"),a._Show(),!0;case "K_LCONTROL":case "K_RCONTROL":case "K_LCTRL":case "K_RCTRL":case "K_CTRL":return a.highlightKey(c,!1),a.updateLayer(g?g:"ctrl"),a._Show(),!0;case "K_LALT":case "K_RALT":case "K_ALT":return a.highlightKey(c,!1),a.updateLayer(g?g:"alt"),a._Show(),!0;case "K_ALTGR":return a.highlightKey(c,
!1),a.updateLayer(g?g:"ctrlalt"),a._Show(),!0;case "K_LOPT":return""==d.app?a.showLanguageMenu():(a.highlightKey(c,!1),"showKeyboardList"in b&&b.showKeyboardList()),!0;case "K_ROPT":return""==d.app?(b._IsActivatingKeymanWebUI=0,a._Hide(!0),b.hideCaret(),b._LastActiveElement=0):(a.highlightKey(c,!1),"hideKeyboard"in b&&b.hideKeyboard()),!0;case "K_CURRENCIES":case "K_NUMERALS":case "K_SHIFTED":case "K_UPPER":case "K_LOWER":case "K_SYMBOLS":return a.highlightKey(c,!1),a.updateLayer(g?g:"default"),a._Show(),
!0}a.highlightKey(c,!1);if("K_SPACE"!=k&&(s=c.childNodes[0].innerHTML,""==s||"&nbsp;"==s))return!0;g=e._KeymanWebSelectionStart;f=e._KeymanWebSelectionEnd;s=b._Selection;b._IsActivatingKeymanWebUI=1;b._IgnoreNextSelChange=100;b._FocusLastActiveElement();b._IsMozillaEditableIframe(e,0)&&(e=e.documentElement);document.selection&&null!=s&&s.select();e._KeymanWebSelectionStart=g;e._KeymanWebSelectionEnd=f;b._IgnoreNextSelChange=0;b._CachedSelectionStart=null;b._DeadkeyDeleteMatched();g={Ltarg:e,Lmodifiers:0,
Lcode:h[k],LisVirtualKey:!0};"U_"==k.substr(0,2)&&(g.LisVirtualKey=!1);"undefined"==typeof g.Lcode&&(g.Lcode=a.getVKDictionaryCode(k),!g.Lcode&&"U_"==k.substr(0,2)&&(f=parseInt(k.substr(2),16),isNaN(f)||(g.Lcode=f)));f="undefined"==typeof c.key?null:c.key.layer;f=null==f?a.getModifierState(m):a.getModifierState(f);g.Lmodifiers=16*f;b._ActiveKeyboard&&b._ActiveKeyboard.KM?(s=c.firstChild.firstChild.wholeText,g.LisVirtualKey=!1,g.LisVirtualKeyCode=!1,g.vkCode=g.Lcode,32!=g.Lcode&&(g.Lcode="string"==
typeof s&&""!=s?s.charCodeAt(0):0,160==g.Lcode&&(g.Lcode=0)),g.Lmodifiers=0):g.vkCode=g.Lcode;"undefined"==typeof b._ActiveKeyboard.KM&&(g.Lcode=b._USKeyCodeToCharCode(g),g.LisVirtualKey=!1);if(!b._ActiveKeyboard||0!=g.Lcode&&!b._ActiveKeyboard.gs(e,g))switch(g.Lcode=g.vkCode,k){case "K_BKSP":b.KO(1,b._LastActiveElement,"");break;case "K_TAB":b.moveToNext("shift"==a.layerId);break;case "K_TABBACK":b.moveToNext(!0);break;case "K_TABFWD":b.moveToNext(!1);break;case "K_ENTER":"TEXTAREA"==e.nodeName||
"undefined"!=typeof e.base&&"TEXTAREA"==e.base.nodeName?b.KO(0,e,"\n"):"INPUT"==e.nodeName&&("search"==e.type||"submit"==e.type)?e.form.submit():"undefined"!=typeof e.base&&("search"==e.base.type||"submit"==e.base.type)?(e.base.disabled=!1,e.base.form.submit()):b.moveToNext(!1);break;case "K_SPACE":b.KO(0,e," ");break;default:m=0,g=g.Lcode,"U_"==k.substr(0,2)&&32<g&&!(127<g&&!1>g)?m=String.fromCharCode(g):48<=g&&57>=g?m=j[f][0][g-48]:65<=g&&90>=g?m=String.fromCharCode(g+(f?0:32)):186<=g&&192>=g?m=
j[f][1][g-186]:219<=g&&222>=g&&(m=j[f][2][g-219]),m&&b.KO(0,e,m)}"undefined"!=typeof c.key&&null!==c.key.nextlayer&&(a.nextLayer=c.key.nextlayer);a.nextLayer!=a.layerId&&(a.layerId=a.nextLayer,a._Show());e._KeymanWebSelectionStart=null;e._KeymanWebSelectionEnd=null}b._IsActivatingKeymanWebUI=0;return!0};a.getLayerId=function(a){var b="";if(0==a)return"default";a&1&&(b="shift");a&4&&(b="alt"+b);a&2&&(b="ctrl"+b);return b};a.getModifierState=function(a){var b=0;0<=a.indexOf("shift")&&(b+=1);0<=a.indexOf("ctrl")&&
(b+=2);0<=a.indexOf("alt")&&(b+=4);return b};a.updateLayer=function(b){var e=a.layerId,d;d=b.replace("shift","");d=d.replace("ctrl","");d=d.replace("alt","");if("default"==a.layerId||"numeric"==a.layerId||"symbol"==a.layerId||"currency"==a.layerId||""!=d)e=b;else{d=a.getModifierState(e);e=e.replace("shift","");e=e.replace("ctrl","");e=e.replace("alt","");switch(b){case "shift":d^=1;break;case "ctrl":d^=2;break;case "alt":d^=4;break;default:e=b}"default"!=e&&(d&1&&(e="shift"+e),d&2&&(e="ctrl"+e),d&
4&&(e="alt"+e))}""==e&&(e="default");a.layerId=e.replace("altctrl","ctrlalt");for(b=0;b<a.layers.length;b++)if(a.layerId==a.layers[b].id)return;a.layerId="default"};a.showLanguage=function(){var c="",e="";b._ActiveStub?(c=b._ActiveStub.KL,e=b._ActiveStub.KN):c=b._ActiveLanguage?b._ActiveLanguage.KN:"English";try{var d=a.spaceBar.firstChild.firstChild;d.parentNode.className="undefined"==typeof d.parentNode.className||""==d.parentNode.className?"kmw-spacebar":d.parentNode.className+" kmw-spacebar";
d.className="kmw-spacebar-caption";e=e.replace(/\s*keyboard\s*/i,"");d.innerHTML=e==c?c:c+" ("+e+")"}catch(f){}};a.releaseKey=function(b,e){e.preventDefault();e.cancelBubble=!0;"function"==typeof e.stopImmediatePropagation?e.stopImmediatePropagation():"function"==typeof e.stopPropagation&&e.stopPropagation();a.subkeyDelayTimer&&window.clearTimeout(a.subkeyDelayTimer);a.lgTimer&&window.clearTimeout(a.lgTimer);a.subkeyDelayTimer=a.lgTimer=null;e.target.id&&0<=e.target.id.indexOf("K_BKSP")?a.highlightKey(e.target,
!1):e.target.parentNode.id&&0<=e.target.parentNode.id.indexOf("K_BKSP")&&a.highlightKey(e.target.parentNode,!1);a.deleting=!1;if(null!==a.keyPending){var d=null;"undefined"!=typeof e.changedTouches&&0<e.changedTouches.length?d=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY):"undefined"!=typeof e.target&&(d=e.target);null!=d&&((""==d.id&&(d=d.parentNode),d==a.keyPending||"kmw-popup-keys"==d.parentNode.parentNode.id)?(a.clickKey(d),a.keyPending=null):a.highlightKey(a.keyPending,
!1));a.keyPending=null}d=document.getElementById("kmw-popup-keys");null!=d&&d.parentNode.removeChild(d)};a.showLanguageMenu=function(){var c=b._KeyboardStubs;if(!(1>c.length)){var e=a.lgList=f._CreateElement("DIV");a.lgList.id="kmw-language-menu";e.shim=f._CreateElement("DIV");e.shim.id="kmw-language-menu-background";e.shim.addEventListener("touchstart",function(b){b.preventDefault();a.hideLanguageList();if(1<b.touches.length){var c=b.touches[1].pageX,b=b.touches[1].pageY;c>a.hkKey.offsetLeft&&(c<
a.hkKey.offsetLeft+a.hkKey.offsetWidth&&b>a.hkKey.offsetTop&&b<a.hkKey.offsetTop+a.hkKey.offsetHeight)&&a.showBuild()}},!1);document.body.appendChild(e.shim);var g=f._CreateElement("DIV"),i=g.style,h=f._CreateElement("DIV");g.id="kmw-menu-scroll-container";h.id="kmw-menu-scroller";"WebkitOverflowScrolling"in i&&(i.WebkitOverflowScrolling="touch");g.appendChild(h);e.appendChild(g);var k,j,i=f._CreateElement("DIV");i.id="kmw-menu-index";for(k=1;26>=k;k++)j=f._CreateElement("P"),j.innerHTML=String.fromCharCode(k+
64),i.appendChild(j);i.ontouchstart=function(b){a.scrollToLanguage(b,g,h)};e.appendChild(i);e.addEventListener("scroll",function(){a.lgList.scrolling=true},!1);g.addEventListener("scroll",function(){if(g.scrollTop<1)g.scrollTop=1;if(g.scrollTop>g.scrollHeight-g.offsetHeight-1)g.scrollTop=g.scrollHeight-g.offsetHeight-1},!1);a.lgList.activeLgNo=a.addLanguagesToMenu(h,c);a.lgList.visibility="hidden";document.body.appendChild(a.lgList);"Android"==d.OS&&"devicePixelRatio"in window&&(a.lgList.style.fontSize=
2/window.devicePixelRatio+"em");if("Android"==d.OS&&("tablet"==d.formFactor&&"devicePixelRatio"in window)&&(k=parseInt(f.getStyleValue(e,"width"),10),c=e.style,isNaN(k)||(c.width=c.maxWidth=2*k/window.devicePixelRatio+"px"),k=parseInt(f.getStyleValue(g,"width"),10),c=g.style,isNaN(k)||(c.width=c.maxWidth=2*k/window.devicePixelRatio+"px"),k=parseInt(f.getStyleValue(h,"width"),10),c=h.style,!isNaN(k)))c.width=c.maxWidth=2*k/window.devicePixelRatio+"px";a.adjustLanguageMenu(0);c=Math.floor(e.offsetHeight/
26);j=Math.round(100*c/(i.childNodes[1].offsetTop-i.childNodes[0].offsetTop))/100;var n=0.6<j?1:2;1.25<j&&(j=1.25);for(k=0;26>k;k++){var l=i.childNodes[k].style;2==n&&1==k%2?l.display="none":(l.fontSize=j*n+"em",l.lineHeight=c*n+"px")}k=g.offsetWidth;g.scrollHeight>g.offsetHeight+3?k+=i.offsetWidth:i.style.display="none";e.style.width=k+"px";a.lgList.visibility="";e=h.firstChild.offsetHeight*a.lgList.activeLgNo+1;g.scrollTop=e;g.scrollTop<e&&(g.scrollTop=g.scrollHeight-g.offsetHeight);g.scrollTop>
g.scrollHeight-g.offsetHeight-1&&(g.scrollTop=g.scrollHeight-g.offsetHeight-1)}};a.adjustLanguageMenu=function(b){var e=a.lgList,g=e.firstChild,i=g.firstChild,h=0,j=e.style,e=e.childNodes[1],m=window.innerHeight-a.lgKey.offsetHeight-16,b=(i.childNodes.length+b-1)*i.firstChild.firstChild.offsetHeight;"iOS"==d.OS&&("phone"==d.formFactor?(h=f.landscapeView()?36:0,m=(window.innerHeight-h-16)*f.getViewportScale()):"tablet"==d.formFactor&&(h=f.landscapeView()?16:0,m-=h));j.left=f._GetAbsoluteX(a.lgKey)+
"px";b>m&&(b=m);j.height=b+"px";j.top=f._GetAbsoluteY(a._Box)+a._Box.offsetHeight-b+window.pageYOffset-6+"px";j.bottom="auto";e.style.height=g.style.height=j.height};a.scrollToLanguage=function(a,b,d){a.stopImmediatePropagation();a.preventDefault();if("P"==a.touches[0].target.nodeName){var f,h,j=0,a=a.touches[0].target.innerHTML.charCodeAt(0),m=d.childNodes;try{for(f=0;f<m.length-1&&!(h=m[f].firstChild.innerHTML.toUpperCase().charCodeAt(0),h>=a);f++);}catch(n){}try{j=d.firstChild.offsetHeight*f+1,
b.scrollTop=j}catch(l){j=0}try{if(b.scrollTop<j&&(b.scrollTop=b.scrollHeight-b.offsetHeight),b.scrollTop>b.scrollHeight-b.offsetHeight-1)b.scrollTop=b.scrollHeight-b.offsetHeight-1}catch(q){}}};a.addLanguagesToMenu=function(c,e){var g=e.length,i,h,j,m=[];for(h=0;h<g;h++)j=e[h].KL,-1==m.indexOf(j)&&m.push(j);m.sort();var l=Math.round(100/f.getViewportScale())/100,r,q,o;j=-1;for(i=0;i<m.length;i++){r=f._CreateElement("DIV");r.className="kbd-list-closed";q=f._CreateElement("P");q.kList=[];for(h=0;h<
g;h++)e[h].KL==m[i]&&q.kList.push(e[h]);"iOS"==d.OS&&(q.style.fontSize=l+"em");r.appendChild(q);c.appendChild(r);m[i]==b._ActiveStub.KL&&(j=i);if(1<q.kList.length){q.className="kbd-list";q.innerHTML=m[i]+"...";q.scrolled=!1;q.ontouchend=function(b){b.preventDefault();b.stopPropagation();b.target.scrolled?b.target.scrolled=false:this.parentNode.className=this.parentNode.className=="kbd-list-closed"?"kbd-list-open":"kbd-list-closed";a.adjustLanguageMenu(this.parentNode.className=="kbd-list-closed"?
0:this.kList.length)};q.ontouchstart=function(a){a.stopPropagation()};q.ontouchmove=function(a){a.target.scrolled=true;a.stopPropagation()};for(h=0;h<q.kList.length;h++)o=f._CreateElement("P"),o.className="kbd-list-entry","iOS"==d.OS&&(o.style.fontSize=l+"em"),a.addKeyboardToMenu(q.kList[h],o,!1),r.appendChild(o)}else q.innerHTML=m[i],q.className="kbd-single-entry",a.addKeyboardToMenu(q.kList[0],q,!0);i==j&&(q.className+=" current")}g=f._CreateElement("DIV");g.id="kmw-menu-footer";g.ontouchstart=
g.ontouchmove=g.ontouchend=function(a){a.preventDefault();a.stopPropagation()};c.appendChild(g);return j};a.addKeyboardToMenu=function(c,e,d){e.kn=c.KI;e.kc=c.KLC;e.innerHTML=d?c.KL:c.KN.replace(" Keyboard","");e.onmspointerdown=e.ontouchstart=function(b){b.stopPropagation();0>=this.className.indexOf("selected")&&(this.className+=" selected");a.lgList.scrolling=!1;a.lgList.y0=b.touches[0].pageY;return!0};e.onmspointermove=e.ontouchmove=function(b){b.stopImmediatePropagation();var c=a.lgList.childNodes[0],
e=c.scrollHeight-c.offsetHeight,d=b.touches[0].pageY,g=d-a.lgList.y0;if(0>g)c.scrollTop>=e-1&&(b.preventDefault(),a.lgList.y0=d);else if(0<g)2>c.scrollTop&&(b.preventDefault(),a.lgList.y0=d);else return;if(-5>g||5<g)a.lgList.scrolling=!0,this.className=this.className.replace(/\s*selected/,""),a.lgList.y0=d;return!0};e.onmspointerout=e.ontouchend=function(c){c.preventDefault();"undefined"!=typeof c.stopImmediatePropagation?c.stopImmediatePropagation():c.stopPropagation();a.lgList.scrolling?this.className=
this.className.replace(/\s*selected/,""):(b.focusing=!0,b.focusTimer=window.setTimeout(function(){b.focusing=!1},1E3),a.lgList.style.display="none",b._SetActiveKeyboard(this.kn,this.kc,!0),b.doKeyboardChange(this.kn,this.kc),b._FocusLastActiveElement(),a.hideLanguageList(),a._Show());return!0}};a.hideLanguageList=function(){a.lgList&&(a.highlightKey(a.lgKey.firstChild,!1),a.lgList.style.visibility="hidden",window.setTimeout(function(){document.body.removeChild(a.lgList.shim);document.body.removeChild(a.lgList);
a.lgList=null},500))};a._UpdateVKShift=function(b,e,d){var f=0,f=b?b.Lmodifiers/16:d?f|e:f&~e;a.layerId=a.getLayerId(f);a._Visible&&a._Show();return!0};a._CancelMouse=function(a){(a=b._GetEventObject(a))&&a.preventDefault&&a.preventDefault();a&&(a.cancelBubble=!0,a.returnValue=!1);return!1};a.showLayer=function(c){if(b._ActiveKeyboard)for(var e=0;e<a.layers.length;e++)if(a.layers[e].id==c)return a.layerId=c,a._Show(),!0;return!1};a.getHeight=function(){if("function"==typeof b.getOskHeight)return b.getOskHeight();
var a=Math.floor(Math.min(screen.availHeight,screen.availWidth)/2);if("phone"==d.formFactor)var e=Math.min(screen.height,screen.width),g=Math.max(screen.height,screen.width),a=f.portraitView()?Math.floor(Math.max(screen.availHeight,screen.availWidth)/3):a*(g/e)/1.6;"iOS"==d.OS&&(a/=f.getViewportScale());"Android"==d.OS&&"phone"==d.formFactor&&"devicePixelRatio"in window&&/Firefox|Chrome|OPR/.test(navigator.userAgent)&&(a*=window.devicePixelRatio);return a};a.deviceDependentLayout=function(b,e){var g=
f._CreateElement("DIV"),i=g.style,j=0;g.className="kmw-key-layer-group";switch(e){case "phone":case "tablet":j=a.getHeight(),i.height=j+"px"}if(null==b)return g;i.fontSize="undefined"==typeof b.fontsize||null==b.fontsize?"1em":b.fontsize;a.fontSize=i.fontSize;var k,m,l,r,q,o,z,u,t,p,v,C,x,y,w;l=b.layer;var E={text:""};E.fontsize=i.fontSize;E.width="100";E.pad="5";E.sp="0";E.layer=null;E.nextlayer=null;for(var F=/\*\w+\*/,j=0;j<l.length;j++){r=l[j];o=r.row;for(k=o.length;0<k&&!(0<o[k-1].key.length);k--);
k<o.length&&o.splice(k-o.length,o.length-k)}z=100/o.length;"desktop"==e&&(z=100/o.length);for(j=0;j<l.length;j++){r=l[j];r.aligned=!1;q=f._CreateElement("DIV");o=q.style;q.className="kmw-key-layer";o.display=0==j?"block":"none";o.height=i.height;o.fontFamily="font"in b?b.font:"";q.layer=q.nextLayer=r.id;"string"==typeof r.nextlayer&&(q.nextLayer=r.nextlayer);o=r.row;var D=0;for(k=0;k<o.length;k++){u=0;m=o[k];t=m.key;for(m=0;m<t.length;m++)p=t[m],null==p?t.length-=1:(u="string"==typeof p.width&&""!=
p.width?u+parseInt(p.width,10):u+100,u="string"==typeof p.pad&&""!=p.pad?u+parseInt(p.pad,10):u+5);u>D&&(D=u)}D+=5;for(k=0;k<o.length;k++){u=f._CreateElement("DIV");u.className="kmw-key-row";u.onmousedown=function(a){a&&a.preventDefault()};m=o[k];C=u.style;C.maxHeight=C.height=z+"%";t=m.key;for(m=0;m<t.length;m++){p=t[m];for(var G in E)"string"!=typeof p[G]&&(p[G]=E[G]);""==p.pad&&(p.pad="5");switch(p.sp){case "1":F.test(p.text)||(p.sp="3");break;case "2":F.test(p.text)||(p.sp="4")}}var B=0;for(m=
0;m<t.length-1;m++)""==t[m].width&&(t[m].width="100"),p=100*parseInt(t[m].width,10)/D,t[m].widthpc=p+"%",v=100*parseInt(t[m].pad,10)/D,t[m].padpc=v+"%",B+=v+p;B+=500/D;1==t.length&&0>parseInt(t[0].pad,10)?(p=100*parseInt(t[0].width,10)/D,t[0].widthpc=p+"%",B+=p,t[0].padpc=100-B+"%"):0<t.length&&(m=t.length-1,v=100*parseInt(t[m].pad,10)/D,t[m].padpc=v+"%",B+=v,t[m].widthpc=100-B+"%");for(m=B=0;m<t.length;m++){p=t[m];v=f._CreateElement("DIV");v.keyId=p.id;v.className="kmw-key-square";x=v.style;"desktop"!=
e&&(x.left=B+parseFloat(t[m].padpc)+"%");B=B+parseFloat(t[m].padpc)+parseFloat(t[m].widthpc);v.width=x.width=p.widthpc;"desktop"!=e?(x.bottom=C.bottom,x.height=C.height):x.marginLeft=p.padpc;y=f._CreateElement("DIV");w=y.style;w.boxSizing=w.MozBoxSizing="border-box";a.setButtonClass(p,y);d.touchable&&(w.position="fixed",w.left=x.left,w.width=x.width);x=null;if(b.keyLabels||"desktop"==e){var A=h[p.id];switch(A){case 186:A=59;break;case 187:A=61;break;case 188:A=44;break;case 189:A=45;break;case 190:A=
46;break;case 191:A=47;break;case 192:A=96;break;case 219:A=91;break;case 220:A=92;break;case 221:A=93;break;case 222:A=39;break;default:if(48>A||90<A)A=0}0<A&&(x=f._CreateElement("DIV"),x.className="kmw-key-label",x.innerHTML=String.fromCharCode(A),v.appendChild(x))}w.overflow="hidden";w.border="1px solid #888888";w.webkitTapHighlightColor="rgba(0,0,0,0)";y.id=r.id+"-"+p.id;y.key=p;if("undefined"!=typeof p.sk&&null!=p.sk){x=y.subKeys=p.sk;for(w=0;w<x.length;w++)if("1"==x[w].sp||"2"==x[w].sp)x[w].text=
a.renameSpecialKey(x[w].text)}else y.subKeys=null;"ontouchstart"in window?(y.ontouchstart=function(b){a.touchKey(this,b)},y.ontouchend=function(b){a.releaseKey(this,b)},y.ontouchmove=function(b){a.moveOverKeys(this,b)},y.onclick=function(a){a.preventDefault();a.stopPropagation()}):d.touchable&&"Windows"==d.OS?(y.style.msTouchAction="none",y.onmspointerdown=function(b){a.touchKey(this,b)},y.onmspointerup=function(b){a.releaseKey(this,b)},y.onmspointermove=function(b){a.moveOverKeys(this,b)}):(y.onmouseover=
y.onmousedown=function(b){var c=f.eventTarget(b);if(c!==null){if(c.nodeName=="SPAN")c=c.parentNode;if(f.eventType(b)=="mousedown"){a.currentKey=c.id;a._CancelMouse(b);a.highlightKey(c,true)}else c.id==a.currentKey&&a.highlightKey(c,true)}},y.onmouseup=y.onmouseout=function(b){var c=f.eventTarget(b);if(c!==null){if(c.nodeName=="SPAN")c=c.parentNode;a.highlightKey(c,false);if(f.eventType(b)=="mouseup"){c.id==a.currentKey&&a.clickKey(c);a.currentKey=""}}});w=f._CreateElement("SPAN");x=w.style;null==
p.text||""==p.text?(w.innerHTML="\u00a0","string"==typeof p.id&&/^U_[0-9A-F]{4}$/i.test(p.id)&&(w.innerHTML=String.fromCharCode(parseInt(p.id.substr(2),16)))):w.innerHTML=p.text;w.className="kmw-key-text";if("1"==p.sp||"2"==p.sp)w.innerHTML=a.renameSpecialKey("*Tab*"==p.text&&1==j?"*TabLeft*":p.text);"font"in p&&(x.fontFamily=p.font);"fontsize"in p&&(x.fontSize=p.fontsize);y.appendChild(w);v.appendChild(y);"undefined"!=typeof p.sk&&null!=p.sk&&(p=f._CreateElement("DIV"),p.className="kmw-key-popup-icon",
v.appendChild(p));u.appendChild(v)}q.appendChild(u)}g.appendChild(q)}return g};a.renameSpecialKey=function(a){for(var b="*Shift* *Enter* *Tab* *BkSp* *Menu* *Hide* *Alt* *Ctrl* *Caps* *ABC* *abc* *123* *Symbol* *Currency* *Shifted* *AltGr* *TabLeft*".split(" "),d=[8,5,6,4,11,10,25,1,3,16,17,19,21,20,8,2,7],f=0;f<b.length;f++)if(a==b[f])return String.fromCharCode(57344+d[f]);return a};a.setButtonClass=function(a,b){var d=0;"string"==typeof a.dk&&"1"==a.dk&&(d=8);"string"==typeof a.sp&&(d=parseInt(a.sp,
10));if(0>d||10<d)d=0;b.className="kmw-key kmw-key-"+"default shift shift-on special special-on    deadkey blank hidden".split(" ")[d]};a.buildDefaultLayout=function(a,b){var d;d=b;var i=window.dfltLayout;"object"!=typeof i[d]&&(d="desktop");d=f.deepCopy(i[d]);var h=d.layer,j=a.BK,m=a.K102,n,r,q,o,z;q=/\*\w+\*/;for(var u="default shift ctrl ctrlshift alt altshift ctrlalt ctrlaltshift".split(" "),i=0;8>i;i++){0<i&&(h[i]=f.deepCopy(h[0]));h[i].id=u[i];h[i].nextlayer=u[i];for(n=0;n<h[i].row.length;n++){r=
h[i].row[n];z=r.key;for(r=0;r<z.length;r++)switch(o=z[r],o.id){case "K_SHIFT":case "K_LSHIFT":case "K_RSHIFT":1==(i&1)&&(o.sp="2");"desktop"!=b&&0<i&&(o.nextlayer="default");break;case "K_CONTROL":case "K_LCTRL":case "K_LCONTROL":case "K_RCTRL":case "K_RCONTROL":2==(i&2)&&(o.sp="2");break;case "K_ALT":case "K_LALT":case "K_RALT":4==(i&4)&&(o.sp="2")}}if("undefined"==typeof m||!m)for(n=0;n<h[i].row.length;n++)for(r=0;r<h[i].row[n].key.length;r++)"K_oE2"==h[i].row[n].key[r].id&&("desktop"==b?(h[i].row[n].key.splice(r,
1),h[i].row[n].key[0].width="200"):h[i].row[n].key[r].sp="10")}for(i=0;i<h.length;i++){var t=h[i],p,v=null,C="",m=t.row;for(n=0;n<m.length;n++){z=m[n].key;for(r=0;r<z.length;r++)o=z[r],p=l.indexOf(o.id),"undefined"!=typeof j&&(0<=p&&p+65*i<j.length)&&(o.text=j[p+65*i]),""==o.text&&("K_SPACE"!=o.id&&130>p+65*i)&&(o.text="`1234567890-=\u00a7~~qwertyuiop[]\\~~~asdfghjkl;'~~~~~?zxcvbnm,./~~~~~ ~!@#$%^&*()_+\u00a7~~QWERTYUIOP{}\\~~~ASDFGHJKL:\"~~~~~?ZXCVBNM<>?~~~~~ "[p+65*i]),"undefined"==typeof o.text&&
(o.text=""),"K_SHIFT"==o.id&&(v=o),q.test(o.text)||(C+=o.text)}t.valid=0<C.trim().length;t.shiftKey=v;if("desktop"!=b&&0<i&&null!=v)switch(v.sp="2",v.sk=null,h[i].id){case "ctrl":v.text="*Ctrl*";break;case "alt":v.text="*Alt*";break;case "ctrlalt":v.text="*AltGr*"}}for(i=0;8>i;i++){m=h[i].row;for(n=0;n<m.length;n++){z=m[n].key;for(r=0;r<z.length;r++)if(o=z[r],null!=o.sk){for(q=0;8>q;q++)for(j=0;j<o.sk.length;j++)if(o.sk[j].nextlayer==u[q]){h[q].valid||o.sk.splice(j,1);break}0==o.sk.length&&(o.sk=
null)}}}return d};a._GenerateVisualKeyboard=function(c,e,g){e=f._CreateElement("DIV");if("object"!=typeof g||null==g)g=a.buildDefaultLayout(c,d.formFactor);a.layout=g;a.layers=g.layer;a.fontFamily="font"in g?g.font:"";g.keyLabels="undefined"!=typeof b._ActiveKeyboard.KDU&&b._ActiveKeyboard.KDU;c=a.deviceDependentLayout(g,d.formFactor);a.ddOSK=!0;a.keyMap=c;e.appendChild(c);a._DivVKbdHelp=a._DivVKbd=e;a._Box.className=d.formFactor+" kmw-osk-frame";e.className=d.formFactor+" kmw-osk-inner-frame";"desktop"==
d.formFactor&&a._Box.appendChild(a.controlBar());a._Box.appendChild(e);"desktop"==d.formFactor?a._Box.appendChild(a.resizeBar()):a.adjustHeights()};b.BuildVisualKeyboard=b.buildOSK=function(c,e,d,f){var h=b._ActiveKeyboard,e=null,j="undefined"==typeof d?"desktop":d,f="undefined"==typeof f?"default":f;if(null!=c){e=c.toLowerCase().replace("keyboard_","");for(d=0;d<b._Keyboards.length;d++)if(e==b._Keyboards[d].KI.toLowerCase().replace("keyboard_","")){h=b._Keyboards[d];break}}if(!h)return null;e=h.KVKL;
c=null;d=h.KV;"object"==typeof e&&("object"==typeof e[j]&&null!=e[j]?c=e[j]:"phone"==j&&"object"==typeof e.tablet&&null!=e.tablet?c=e.tablet:"tablet"==j&&"object"==typeof e.phone&&null!=e.phone?c=e.phone:"object"==typeof e.desktop&&null!=e.desktop&&(c=e.desktop));null==c&&null!=d&&(c=a.buildDefaultLayout(d,j));null!=c&&(c.keyLabels="undefined"!=typeof h.KDU&&h.KDU);e=a.deviceDependentLayout(c,j);e.className="desktop kmw-osk-inner-frame";if(null!=c)for(var m,l,r,d=0;d<c.layer.length;d++){h=e.childNodes[d];
h.style.height="100%";for(l=0;l<h.childNodes.length;l++){j=h.childNodes[l];for(r=0;r<j.childNodes.length;r++)m=j.childNodes[r],m.style.height="100%",m.style.left="auto",m.style.padding="0%"}h.style.display="number"==typeof f?d==f&&0<=f?"block":"none":"string"==typeof f?c.layer[d].id==f?"block":"none":0==d?"block":"none"}else e.innerHTML="<p style='color:#c40; font-size:0.5em;margin:10px;'>No "+j+" layout is defined for "+h.KN+".</p>";e.style.border="1px solid #ccc";return e};b.correctOSKTextSize=
a.adjustHeights=function(){var b=a._Box.firstChild.firstChild.childNodes,e=b[0].childNodes.length,g=a.getHeight(),i=Math.floor(g/e),h,j,m,l,r,q,o,z,u,t=4;h=1;"Android"==d.OS&&"devicePixelRatio"in window&&(i/=window.devicePixelRatio);g=e*i;j=a._Box;m=j.style;m.height=m.maxHeight=g+3+"px";j=j.firstChild.firstChild;m=j.style;m.height=m.maxHeight=g+3+"px";"phone"==d.formFactor&&(t=2,h=0.6);"iOS"==d.OS&&(h/=f.getViewportScale());m.fontSize=h+"em";var p="iOS"==d.OS&&"phone"==d.formFactor&&f.landscapeView();
for(h=0;h<b.length;h++){b[h].style.height=g+3+"px";for(j=0;j<e;j++){m=b[h].childNodes[j].style;m.bottom=(e-j-1)*i+"px";m.maxHeight=m.height=i+"px";l=b[h].childNodes[j].childNodes;r=l.length;for(q=0;q<r;q++){o=l[q];for(u=0;u<o.childNodes.length&&!(0>o.childNodes[u].className.indexOf("key-label"));u++);z=o.childNodes[u].style;z.bottom=m.bottom;z.height=i-t+"px";p&&0<u&&(o.childNodes[0].style.fontSize="6px")}}}};a.controlBar=function(){var c=f._CreateElement("DIV"),e="";c.id="keymanweb_title_bar";c.className=
"kmw-title-bar";c.onmousedown=a._VMoveMouseDown;b._ActiveKeyboard&&(e=b._ActiveKeyboard.KN);var d=f._CreateElement("SPAN");d.className="kmw-title-bar-caption";d.innerHTML=e;c.appendChild(d);e=a.closeButton=f._CreateElement("DIV");e.id="kmw-close-button";e.className="kmw-title-bar-image";e.onmousedown=a._CancelMouse;e.onclick=function(){a._Hide(!0)};c.appendChild(e);e=a.helpImg=f._CreateElement("DIV");e.id="kmw-help-image";e.className="kmw-title-bar-image";e.title="KeymanWeb Help";e.onclick=function(){f.callEvent("osk.helpclick",
{});window.event&&(window.event.returnValue=!1);return!1};e.onmousedown=a._CancelMouse;c.appendChild(e);e=a.configImg=f._CreateElement("DIV");e.id="kmw-config-image";e.className="kmw-title-bar-image";e.title="KeymanWeb Configuration Options";e.onclick=function(){f.callEvent("osk.configclick",{});window.event&&(window.event.returnValue=!1);return!1};e.onmousedown=a._CancelMouse;c.appendChild(e);e=a.pinImg=f._CreateElement("DIV");e.id="kmw-pin-image";e.className="kmw-title-bar-image";e.title="Pin the On Screen Keyboard to its default location on the active text box";
e.onclick=function(){a.loadCookie();a.userPositioned=!1;a.saveCookie();a._Show();a.doResizeMove();a.pinImg&&(a.pinImg.style.display="none");window.event&&(window.event.returnValue=!1);return!1};e.onmousedown=a._CancelMouse;c.appendChild(e);return c};a.showBuild=function(){f.alert("KeymanWeb Build "+b.build+'<br /><br /><span style="font-size:0.8em">Copyright &copy; 2013 Tavultesoft Pty Ltd</span>')};a.resizeBar=function(){var b=f._CreateElement("DIV");b.className="kmw-footer";b.onmousedown=a._CancelMouse;
var e=f._CreateElement("DIV");e.className="kmw-footer-caption";e.innerHTML="Keyboard &copy; 2013 Tavultesoft Pty Ltd";e.id="keymanweb-osk-footer-caption";f.attachDOMEvent(e,"dblclick",function(b){b&&b.shiftKey&&a.showBuild()},!1);"onselectstart"in e&&(e.onselectstart=function(){return!1});b.appendChild(e);e=f._CreateElement("DIV");e.className="kmw-footer-resize";e.onmousedown=a._VResizeMouseDown;e.onmouseover=e.onmouseout=a._VResizeMouseOut;b.appendChild(e);a.resizeIcon=e;return b};a._VKbdMouseOver=
function(){b._IsActivatingKeymanWebUI=1};a._VKbdMouseOut=function(){b._IsActivatingKeymanWebUI=0};a._VResizeMouseOver=a._VResizeMouseOut=function(c){c=b._GetEventObject(c);if(!c)return!1;c&&c.preventDefault&&c.preventDefault();var e=a.getRect();a.width=e.width;a.height=e.height;c.cancelBubble=!0;return!1};a._VResizeMouseDown=function(c){b._JustActivatedKeymanWebUI=1;c=b._GetEventObject(c);if(!c)return!0;a.resizing=1;var e,d;c.pageX?(e=c.pageX,d=c.pageY):c.clientX&&(e=c.clientX+document.body.scrollLeft,
d=c.clientY+document.body.scrollTop);a._ResizeMouseX=e;a._ResizeMouseY=d;document.onmousemove!=a._VResizeMouseMove&&document.onmousemove!=a._VMoveMouseMove&&(a._VPreviousMouseMove=document.onmousemove,a._VPreviousMouseUp=document.onmouseup);a._VPreviousCursor=document.body.style.cursor;a._VPreviousMouseButton="undefined"==typeof c.which?c.button:c.which;a._VOriginalWidth=a._DivVKbd.offsetWidth;a._VOriginalHeight=a._DivVKbd.offsetHeight;document.onmousemove=a._VResizeMouseMove;document.onmouseup=a._VResizeMoveMouseUp;
document.body.style.cursor&&(document.body.style.cursor="se-resize");c&&c.preventDefault&&c.preventDefault();c.cancelBubble=!0;return!1};a._VResizeMouseMove=function(c){var e,d,c=b._GetEventObject(c);if(!c)return!0;a.resizing=1;if(a._VPreviousMouseButton!=("undefined"==typeof c.which?c.button:c.which))return a._VResizeMoveMouseUp(c);c.pageX?(e=c.pageX,d=c.pageY):c.clientX&&(e=c.clientX+document.body.scrollLeft,d=c.clientY+document.body.scrollTop);e=a._VOriginalWidth+e-a._ResizeMouseX;d=a._VOriginalHeight+
d-a._ResizeMouseY;e<0.2*screen.width&&(e=0.2*screen.width);d<0.1*screen.height&&(d=0.1*screen.height);e>0.9*screen.width&&(e=0.9*screen.width);d>0.5*screen.height&&(e=0.5*screen.height);a._DivVKbd.style.width=e+"px";a._DivVKbd.style.height=d+"px";a._DivVKbd.style.fontSize=d/8+"px";f.showShim(a._DivVKbd,a.shim,a._DivVKbdHelp);c&&c.preventDefault&&c.preventDefault();c.cancelBubble=!0;return!1};a._VMoveMouseDown=function(c){var d,f;b._JustActivatedKeymanWebUI=1;c=b._GetEventObject(c);if(!c)return!0;
a.resizing=1;c.pageX?(d=c.pageX,f=c.pageY):c.clientX&&(d=c.clientX+document.body.scrollLeft,f=c.clientY+document.body.scrollTop);document.onmousemove!=a._VResizeMouseMove&&document.onmousemove!=a._VMoveMouseMove&&(a._VPreviousMouseMove=document.onmousemove,a._VPreviousMouseUp=document.onmouseup);a._VPreviousCursor=document.body.style.cursor;a._VPreviousMouseButton="undefined"==typeof c.which?c.button:c.which;a._VMoveX=d-a._Box.offsetLeft;a._VMoveY=f-a._Box.offsetTop;b.isCJK()&&(a.pinImg.style.left=
"15px");document.onmousemove=a._VMoveMouseMove;document.onmouseup=a._VResizeMoveMouseUp;document.body.style.cursor&&(document.body.style.cursor="move");c&&c.preventDefault&&c.preventDefault();c.cancelBubble=!0;return!1};a._VMoveMouseMove=function(c){var d,g,c=b._GetEventObject(c);if(!c||a.noDrag)return!0;a.resizing=1;a.userPositioned=!0;a.pinImg.style.display="block";if(a._VPreviousMouseButton!=("undefined"==typeof c.which?c.button:c.which))return a._VResizeMoveMouseUp(c);c.pageX?(d=c.pageX,g=c.pageY):
c.clientX&&(d=c.clientX+document.body.scrollLeft,g=c.clientY+document.body.scrollTop);a._Box.style.left=d-a._VMoveX+"px";a._Box.style.top=g-a._VMoveY+"px";a._DivVKbd?f.showShim(a._DivVKbd,a.shim,a._DivVKbdHelp):f.showShim(a._Box,a.shim);c&&c.preventDefault&&c.preventDefault();d=a.getRect();a.width=d.width;a.height=d.height;c.cancelBubble=!0;return!1};a._VResizeMoveMouseUp=function(c){c=b._GetEventObject(c);if(!c)return!0;a.resizing=0;a.currentKey=null;document.onmousemove=a._VPreviousMouseMove;document.onmouseup=
a._VPreviousMouseUp;document.body.style.cursor&&(document.body.style.cursor=a._VPreviousCursor);b._FocusLastActiveElement();c&&c.preventDefault&&c.preventDefault();b._JustActivatedKeymanWebUI=0;b._IsActivatingKeymanWebUI=0;a._DivVKbd&&(a._VOriginalWidth=a._DivVKbd.offsetWidth,a._VOriginalHeight=a._DivVKbd.offsetHeight);a.doResizeMove();c.cancelBubble=!0;a.saveCookie();return!1};a.userLocated=function(){return a.userPositioned};a.show=function(b){0<arguments.length?(a._Enabled=b)?a._Show():a._Hide(!0):
a._Visible?a._Hide(!0):a._Show()};a.doShow=function(a){return f.callEvent("osk.show",a)};a.doHide=function(a){return f.callEvent("osk.hide",a)};a.doResizeMove=function(a){return f.callEvent("osk.resizemove",a)};a._Show=function(c,e){if(!(null==a._Box||null==b._ActiveElement))if(d.touchable||null!=b._ActiveKeyboard&&a._Enabled){var g=a._Box.style;d.touchable&&""==g.bottom&&(g.visibility="hidden");if(a.ddOSK){var i,h=-1,j=a._DivVKbd.childNodes[0].childNodes;for(i=0;i<j.length;i++)j[i].layer==a.layerId?
(j[i].style.display="block",a.nextLayer=a.layerId,a.layerIndex=h=i,"string"==typeof a.layers[i].nextlayer&&(a.nextLayer=a.layers[i].nextlayer)):j[i].style.display="none";d.touchable&&(g.position="fixed",g.left=g.bottom="0px",g.height=g.maxHeight=a._Box.firstChild.firstChild.style.height,g.border="none",g.borderTop="1px solid gray",a._Enabled=1,a._Visible=1,a._DivVKbd.style.fontSize="phone"==d.formFactor?"120%":"Android"==d.OS&&"tablet"==d.formFactor&&300>parseInt(g.height,10)?"120%":"200%",a.lgKey=
a.getSpecialKey(h,"K_LOPT"),a.hkKey=a.getSpecialKey(h,"K_ROPT"),"iOS"==d.OS&&"phone"==d.formFactor&&a.adjustHeights());a.spaceBar=a.getSpecialKey(h,"K_SPACE")}g.display="block";a.showLanguage();if("desktop"==d.formFactor&&(g.position="absolute",g.display="block",g.left="0px",a.loadCookie(),0<=c?(g.left=c+"px",g.top=e+"px"):a.userPositioned?(g.left=a.x+"px",g.top=a.y+"px"):(i=b._ActiveElement,""!=a.dfltX?g.left=a.dfltX:"undefined"!=typeof i&&null!=i&&(g.left=f._GetAbsoluteX(i)+"px"),""!=a.dfltY)?g.top=
a.dfltY:"undefined"!=typeof i&&null!=i&&(g.top=f._GetAbsoluteY(i)+i.offsetHeight+"px"),a._Enabled=1,a._Visible=1,a._DivVKbd&&(a.width=a._DivVKbd.offsetWidth,a.height=a._DivVKbd.offsetHeight),a.saveCookie(),i=a.pinImg,"undefined"!=typeof i&&null!=i))i.style.display=a.userPositioned?"block":"none";"hidden"==g.visibility&&window.setTimeout(function(){a._Box.style.visibility="visible"},0);d.touchable||(g={},g.x=a._Box.offsetLeft,g.y=a._Box.offsetTop,g.userLocated=a.userPositioned,a.doShow(g))}};a.adjustRowLengths=
function(b){if(!(0<=b)){var e,g=a._DivVKbd.childNodes[0].childNodes;if(!(0>b||b>=g.length||g[b].aligned)&&"block"==g[b].style.display){e=a._DivVKbd.childNodes[0].offsetWidth-6;"Windows"==d.OS&&(e-=f.landscapeView()?4:40);var i,h=g[b].childNodes,j,l,n;for(i=0;i<h.length;i++)j=h[i].childNodes,l=j.length,n=j[l-2].offsetLeft+j[l-2].offsetWidth,j=j[l-1],j.style.width=e-n+"px";g[b].aligned=!0}}};a.resetRowLengths=function(){var b,d=a._DivVKbd.childNodes[0].childNodes,f=-1;for(b=0;b<d.length;b++)"block"==
d[b].style.display&&(f=b),d[b].aligned=!1;return f};a.getSpecialKey=function(b,d){var f,h;f=a._DivVKbd.childNodes[0].childNodes;if(0<=b&&b<f.length){f=f[b].childNodes;h=f[f.length-1].childNodes;for(f=0;f<h.length;f++)if(h[f].keyId==d)return h[f]}return null};a.hide=function(){a._Enabled=0;a._Hide(!0)};a._Hide=function(c){a._Box&&("block"==a._Box.style.display&&a._DivVKbd)&&(a.width=a._DivVKbd.offsetWidth,a.height=a._DivVKbd.offsetHeight);if(c)a._Enabled=b.isCJK()||d.touchable?1:0,a.saveCookie();else if("desktop"==
d.formFactor&&0<=document.body.className.indexOf("osk-always-visible"))return;a._Visible=0;if(a._Box&&d.touchable&&0<a._Box.offsetHeight){var e=a._Box.style;e.transition="string"==typeof e.MozBoxSizing?"opacity 0.8s linear":e.msTransition=e.WebkitTransition="opacity 0.5s linear 0";window.setTimeout(function(){var b=a._Box.style;if(a._Visible)b.transition=b.msTransition=b.MozTransition=b.WebkitTransition="";else{b.opacity="0";a._Box.addEventListener("transitionend",a.hideNow,false);a._Box.addEventListener("webkitTransitionEnd",
a.hideNow,false)}},200)}else a._Box&&(a._Box.style.display="none"),f.hideShim(a.shim);e={};e.HiddenByUser=c;a.doHide(e);c&&b._FocusLastActiveElement()};a.hideNow=function(){a._Box.removeEventListener("transitionend",a.hideNow,!1);a._Box.removeEventListener("webkitTransitionEnd",a.hideNow,!1);var b=a._Box.style;b.display="none";b.opacity="1";a._Visible=0;b.transition=b.msTransition=b.mozTransition=b.WebkitTransition="";"undefined"!=typeof a.hkKey&&a.highlightKey(a.hkKey.firstChild,!1)};a.prepare=function(){b.initialized?
(a.ready||(a._Box=f._CreateElement("DIV"),document.body.appendChild(a._Box),""!=d.app?f.linkStyleSheet(f.myPath()+"kmwosk.css"):f.linkStyleSheet(f.getOption("resources")+"osk/kmwosk.css"),f.attachDOMEvent(a._Box,"mousedown",function(){b._IsActivatingKeymanWebUI=1}),d.touchable&&(f.attachDOMEvent(a._Box,"touchstart",function(a){b._IsActivatingKeymanWebUI=1;a.preventDefault();a.stopPropagation()}),f.attachDOMEvent(a._Box,"touchend",function(a){a.preventDefault();a.stopPropagation()}),f.attachDOMEvent(a._Box,
"touchmove",function(a){a.preventDefault();a.stopPropagation()}),f.attachDOMEvent(a._Box,"touchcancel",function(a){a.preventDefault();a.stopPropagation()}),a.vpScale=f.getViewportScale())),a.loadCookie(),a.ready=!0):window.setTimeout(a.prepare,200)};a._Load=function(){if(null==a._Box){if(99<=a.loadRetry)return;window.setTimeout(a._Load,100);a.loadRetry++}b._TitleElement&&(b._TitleElement.innerHTML="Tavultesoft KeymanWeb");a._Visible=0;a.layerId="default";var c=a._Box.style;c.zIndex="9999";c.display=
"none";c.width="auto";c.position="desktop"==d.formFactor?"absolute":"fixed";"phone"==d.formFactor&&(c.fontSize="1.6em");a._DivVKbd=a._DivVKbdHelp=null;a._Box.innerHTML="";a._Box.onmouseover=a._VKbdMouseOver;a._Box.onmouseout=a._VKbdMouseOut;if(null==b._ActiveKeyboard&&!d.touchable){var e=f._CreateElement("DIV");e.className="kmw-title-bar";e.appendChild(a._TitleBarInterior());e.onmousedown=a._VMoveMouseDown;a._Box.appendChild(e);e=f._CreateElement("DIV");e.className="kmw-osk-none";a._Box.appendChild(e)}else{var g=
e=null,h=null,c="";a._Box.className="";if(null!=b._ActiveKeyboard&&(e=b._ActiveKeyboard.KV,c=b._ActiveKeyboard.KH,g=b._ActiveKeyboard.KVKL,"undefined"!=typeof g&&null!=g&&(h=g[d.formFactor],"undefined"==typeof h||null==h)))if("phone"==d.formFactor?h=g.tablet:"tablet"==d.formFactor&&(h=g.phone),"undefined"==typeof h||null==h)h=g.desktop;if(null!=e&&null!=e.BK){for(var g=e.BK,j=!0,k=0;k<g.length;k++)if(0<g[k].length){j=!1;break}j&&(e=null)}null!=e||""==c||d.touchable?(null==e&&(e={F:"Tahoma",BK:"`1234567890-=\u00a7~~qwertyuiop[]\\~~~asdfghjkl;'~~~~~?zxcvbnm,./~~~~~ ~!@#$%^&*()_+\u00a7~~QWERTYUIOP{}\\~~~ASDFGHJKL:\"~~~~~?ZXCVBNM<>?~~~~~ "}),
a._GenerateVisualKeyboard(e,c,h)):(a.ddOSK=!1,e=f._CreateElement("DIV"),e.className="kmw-title-bar",e.appendChild(a._TitleBarInterior()),e.onmousedown=a._VMoveMouseDown,a._Box.appendChild(e),e=f._CreateElement("DIV"),e.className="kmw-osk-static",e.innerHTML=c,a._Box.appendChild(e),b._ActiveKeyboard.KHF&&b._ActiveKeyboard.KHF(a._Box));b._TitleElement&&(b._TitleElement.innerHTML="<span style='font-weight:bold'>"+b._ActiveKeyboard.KN+"</span> - "+b._TitleElement.innerHTML,b._TitleElement.className="",
b._TitleElement.style.color="#fff")}""==d.app&&"phone"==d.formFactor&&(null==a.keytip&&(a.keytip=f._CreateElement("DIV"),a.keytip.className="kmw-keytip"),a._Box.appendChild(a.keytip));a.appendStyleSheet();a._Enabled&&a._Show()};a.appendStyleSheet=function(){if(null!=b._ActiveStub){a.styleSheet&&f.removeStyleSheet(a.styleSheet);var c=b._ActiveStub,e=c.KFont,g=c.KOskFont;f.addFontFaceStyleSheet(e);f.addFontFaceStyleSheet(g);b.alignInputs(!1);a.styleSheet=f.addStyleSheet(a.addFontStyle(e,g));if(""==
d.app&&("undefined"!=typeof e||"undefined"!=typeof g)){var h=f.checkFontDescriptor(e),j=f.checkFontDescriptor(g);if(!h||!j){var k=window.setInterval(function(){h=f.checkFontDescriptor(e);j=f.checkFontDescriptor(g);h&&j&&(window.clearInterval(k),k=null,b.alignInputs(!0))},100);window.setTimeout(function(){k&&(window.clearInterval(k),k=null,b.alignInputs(!0))},5E3);return}}b.alignInputs(!0)}};a.addFontStyle=function(a,d){var f=b.baseFont;"undefined"!=typeof a&&"undefined"!=typeof a.family&&(f=a.family);
var h=b.appliedFont,h=h.replace(RegExp("s?"+f+",?"),""),h=h.replace(/,$/,""),h=""==h?f:f+","+h,f=".keymanweb-font{\nfont-family:"+h+" !important;\n}\n";"undefined"!=typeof d?f=f+".kmw-key-text{\nfont-family:"+d.family+";\n}\n":"undefined"!=typeof a&&(f=f+".kmw-key-text{\nfont-family:"+a.family+";\n}\n");b.appliedFont=h;return f};a._Unload=function(){a._VShift=a._DivVKbd=a._VKeySpans=a._Box=0};a.saveCookie=function(){var b=f.loadCookie("KeymanWeb_OnScreenKeyboard"),d=a.getPos();b.visible=a._Enabled?
1:0;b.userSet=a.userPositioned?1:0;b.left=d.left;b.top=d.top;a._DivVKbd&&(b.width=a.width,b.height=a.height);f.saveCookie("KeymanWeb_OnScreenKeyboard",b)};a.loadCookie=function(){var b=f.loadCookie("KeymanWeb_OnScreenKeyboard");if("undefined"==typeof b||null==b)return a.userPositioned=!1;a._Enabled=f.toNumber(b.visible,!0);a.userPositioned=f.toNumber(b.userSet,!1);a.x=f.toNumber(b.left,-1);a.y=f.toNumber(b.top,-1);var d=f.toNumber(b.width,0.3*screen.width),b=f.toNumber(b.height,0.15*screen.height);
d<0.2*screen.width&&(d=0.2*screen.width);b<0.1*screen.height&&(b=0.1*screen.height);d>0.9*screen.width&&(d=0.9*screen.width);b>0.5*screen.height&&(d=0.5*screen.height);a._DivVKbd&&(a._DivVKbd.style.width=d+"px",a._DivVKbd.style.height=b+"px",a._DivVKbd.style.fontSize=b/8+"px");if(-1==a.x||-1==a.y||!a._Box)a.userPositioned=!1;a.x<window.pageXOffset-0.8*d&&(a.x=window.pageXOffset-0.8*d);0>a.y&&(a.x=-1,a.y=-1,a.userPositioned=!1);a.userPositioned&&a._Box&&a.setPos({left:a.x,top:a.y});return!0};b.executePopupKey=
function(c){if(!b._ActiveKeyboard)return!1;var c=c.replace("popup-",""),c=c.split("-"),d=1<c.length?c[0]:a.layerId,c=c[c.length-1];"undefined"==d&&(d=a.layerId);var f=b._LastActiveElement,i,d=a.getModifierState(d);null==b._ActiveElement&&(b._ActiveElement=f);switch(c){case "K_LSHIFT":case "K_RSHIFT":case "K_SHIFT":return a.updateLayer("shift"),a._Show(),!0;case "K_LCONTROL":case "K_RCONTROL":case "K_LCTRL":case "K_RCTRL":case "K_CTRL":return a.updateLayer("ctrl"),a._Show(),!0;case "K_LMENU":case "K_RMENU":case "K_LALT":case "K_RALT":case "K_ALT":return a.updateLayer("alt"),
a._Show(),!0;case "K_ALTGR":return a.updateLayer("ctrlalt"),a._Show(),!0}i={Ltarg:f,Lmodifiers:0,Lcode:h[c],LisVirtualKey:!0};"undefined"==typeof i.Lcode&&(i.Lcode=a.getVKDictionaryCode(c));if(!i.Lcode&&"U_"==c.substr(0,2)){var l=parseInt(c.substr(2),16);isNaN(l)||(i.Lcode=l)}if(isNaN(i.Lcode)||!i.Lcode)return!1;i.vkCode=i.Lcode;"U_"==c.substr(0,2)&&(i.isVirtualKey=!1);i.Lmodifiers=16*d;if(!b._ActiveKeyboard||0==i.Lcode)return!1;if(b._ActiveKeyboard.gs(f,i))return!0;l=0;i=i.Lcode;"U_"==c.substr(0,
2)&&32<i&&!(127<i&&!1>i)?l=String.fromCharCode(i):48<=i&&57>=i?l=j[d][0][i-48]:65<=i&&90>=i?l=String.fromCharCode(i+(d?0:32)):186<=i&&192>=i?l=j[d][1][i-186]:219<=i&&222>=i&&(l=j[d][2][i-219]);l&&b.KO(0,f,l);return!0};b.touchMenuPos=function(){if(null==a.lgKey)return"";var b=f._GetAbsoluteX(a.lgKey)-f._GetAbsoluteX(a._DivVKbd)+a.lgKey.offsetWidth/2,d=f._GetAbsoluteY(a.lgKey)-f._GetAbsoluteY(a._DivVKbd);return b+","+d}})();(function(){var b=window.tavultesoft.keymanweb,h=b.util,j=b.osk,l=h.device;b.TSS_LAYER=33;b.TSS_PLATFORM=31;b._BeepObjects=[];b._BeepTimeout=0;b.KSF=b.KSF=function(){b._IgnoreNextSelChange=1};b.KT=b.KT=function(a,f){b.cachedContext.reset();var d=b._LastActiveElement,c,e,g;c=!1;null!=d&&(c=d._KeymanWebSelectionStart,e=d._KeymanWebSelectionEnd,g=b._Selection,b._IsActivatingKeymanWebUI=1,b._IgnoreNextSelChange=100,b._FocusLastActiveElement(),b._IsMozillaEditableIframe(d,0)&&(d=d.documentElement),document.selection&&
null!=g&&g.select(),d._KeymanWebSelectionStart=c,d._KeymanWebSelectionEnd=e,b._IgnoreNextSelChange=0,null!=a&&b.KO(0,d,a),"undefined"!=typeof f&&b.KDO(0,d,f),d._KeymanWebSelectionStart=null,d._KeymanWebSelectionEnd=null,c=!0);return c};b.KR=b.KR=function(a){b.loadTimer&&a.KI==b._LoadingInternalName&&(window.clearTimeout(b.loadTimer),b.loadTimer=null);if(b.initialized){var f,d=b._ActiveStub;if(!d||!("KI"in d)||d.KI!=a.KI)for(f=0;f<b._KeyboardStubs.length;f++){d=b._KeyboardStubs[f];if(a.KI==d.KI)break;
d=null}b.KRS(d?d:a);for(f=0;f<b._Keyboards.length;f++)if(a.KI==b._Keyboards[f].KI)return;b._Keyboards=b._push(b._Keyboards,a);b._LoadingInternalName==a.KI&&(b.doBeforeKeyboardChange(a.KI,d.KLC),b._ActiveKeyboard=a,null!=b._LastActiveElement&&(b._JustActivatedKeymanWebUI=1,b._SetTargDir(b._LastActiveElement)),b._LoadingInternalName=null,a.KL="undefined"!=typeof d.KL?d.KL:"",a.KLC="undefined"!=typeof d.KLC?d.KLC:"",a.KR="undefined"!=typeof d.KR?d.KR:"",a.KRC="undefined"!=typeof d.KRC?d.KRC:"",a.KC=
"undefined"!=typeof d.KC?d.KC:"",a.KCC="undefined"!=typeof d.KCC?d.KCC:"",a.KD="undefined"!=typeof d.KD?d.KD:"",a.KS="undefined"!=typeof d.KS?d.KS:0,String.kmwEnableSupplementaryPlane(d&&(d.KS&&1==d.KS||"Hieroglyphic"==a.KN)),b.saveCurrentKeyboard(a.KI,d.KLC),j._Load(),h.wait(!1));b.doKeyboardLoaded(a.KI)}else b.deferredKR.push(a)};b.KRS=b.KRS=function(a){var f;if(b.initialized){null==b.dfltStub&&(b.dfltStub=a);"undefined"==typeof a.KLC&&(a.KLC="");"undefined"==typeof a.KL&&(a.KL="undefined");for(f=
0;f<b._KeyboardStubs.length;f++)if(b._KeyboardStubs[f].KI==a.KI&&(""==a.KLC||b._KeyboardStubs[f].KLC==a.KLC))return 1;b._KeyboardStubs=b._push(b._KeyboardStubs,a)}else b.deferredKRS.push(a)};b.KC=b.KC=function(a,f,d){var c=b.cachedContext.get(a,f);if(null!==c)return c;d=b.KC_(a,f,d);b.cachedContext.set(a,f,d);return d};b.KC_=function(a,f,d){var c,e=d.body?d:d.ownerDocument;if(l.touchable&&""==l.app)return b.getTextBeforeCaret(d)._kmwSubstr(-a)._kmwSubstr(0,f);if(b.legacy)return d.value._kmwSubstr(d.length-
a,f);if(e&&(c=e.defaultView)&&c.getSelection&&("on"==e.designMode.toLowerCase()||"true"==d.contentEditable||"plaintext-only"==d.contentEditable||""===d.contentEditable)){if(d=c.getSelection(),3==d.focusNode.nodeType)return d.focusOffset>2*a?d.focusNode.substringData(d.focusOffset-2*a,2*a)._kmwSubstr(-a)._kmwSubstr(0,f):d.focusNode.substringData(0,d.focusOffset)._kmwSubstr(-a)._kmwSubstr(0,f)}else{if(d.setSelectionRange){if(d._KeymanWebSelectionStart)c=d._KeymanWebSelectionStart;else{if(null===b._CachedSelectionStart||
d.selectionStart!==b._LastCachedSelection)b._LastCachedSelection=d.selectionStart,b._CachedSelectionStart=d.value._kmwCodeUnitToCodePoint(d.selectionStart),b._CachedSelectionEnd=d.value._kmwCodeUnitToCodePoint(d.selectionEnd);c=b._CachedSelectionStart}return c<a?d.value._kmwSubstr(0,c):d.value._kmwSubstring(c-a,c-a+f)}if(e&&(c=e.selection))return d=c.createRange(),d.moveStart("character",-2*a),d.text._kmwSubstr(-a)._kmwSubstring(0,f)}return""};b.KN=b.KN=function(a,b){var d=this.KC(a+1,a+1,b);return!1===
d?!0:d._kmwLength()<a+1};b.KCM=b.KCM=function(a,b,d,c){a=this.KC(a,c,b);if(!1!==a&&a===d)return!0;this._DeadkeyResetMatched();return!1};b.KIK=b.KIK=function(a){return b._ActiveKeyboard.KM?!a.LisVirtualKey:b._USKeyCodeToCharCode(a)?!0:!1};b.KKM=b.KKM=function(a,b,d){var c=0,e=173==a.Lcode?189:a.Lcode;255<a.vkCode&&(e=a.vkCode);if(a.LisVirtualKey||255<e){if(16384==(b&16384)||255<e)c=d==e&&(b&127)==a.Lmodifiers}else 0==(b&16384)&&(c=e==d);c||this._DeadkeyResetMatched();return c};b.KKI=b.KKI=function(a){var b=
{};b.vk=a.LisVirtualKey;b.code=a.Lcode;b.modifiers=a.Lmodifiers;return b};b.KDM=b.KDM=function(a,f,d){if(0==b._DeadKeys.length)return!1;a=b._SelPos(f)-a;for(f=0;f<b._DeadKeys.length;f++)if(b._DeadKeys[f].p==a&&b._DeadKeys[f].d==d)return b._DeadKeys[f].matched=1;this._DeadkeyResetMatched();return!1};b.KBR=b.KBR=function(){b.cachedContext.reset();var a;for(a=b._BeepTimeout=0;a<b._BeepObjects.length;a++)b._BeepObjects[a].e.style.backgroundColor=b._BeepObjects[a].c;b._BeepObjects=[]};b.KB=b.KB=function(a){b.cachedContext.reset();
a.body&&(a=a.body);if(a.style&&"undefined"!=typeof a.style.backgroundColor){for(var f=0;f<b._BeepObjects.length;f++)if(b._BeepObjects[f].e==a)return;b._BeepObjects=b._push(b._BeepObjects,{e:a,c:a.style.backgroundColor});a.style.backgroundColor="#000000";0==b._BeepTimeout&&(b._BeepTimeout=1,window.setTimeout(b.KBR,50))}};b.KA=b.KA=function(a,f,d){if(""==f)return 0;f=d._kmwIndexOf(f);b._AnyIndices[a]=f;return 0<=f};b.KO=b.KO=function(a,f,d){b.cachedContext.reset();if("oninserttext"in b)b.oninserttext(a,
d);var c=f.body?f:f.ownerDocument,e;if(0<=f.className.indexOf("keymanweb-input")){var g=b.getTextBeforeCaret(f),g=0<a?g._kmwSubstr(0,g._kmwLength()-a)+d:g+d;b.setTextBeforeCaret(f,g)}else{if(b.legacy)f.value=0<a?f.value._kmwSubstr(0,f.value._kmwLength()-a)+d:f.value+d;else if(c&&(e=c.defaultView)&&e.getSelection&&("on"==c.designMode.toLowerCase()||"true"==f.contentEditable||"plaintext-only"==f.contentEditable||""===f.contentEditable)){var h="on"==c.designMode.toLowerCase();if(h)var j=b._CacheCommands(c);
e=e.getSelection();g=e.focusNode.nodeValue?e.focusNode.substringData(0,e.focusOffset)._kmwLength():0;e.isCollapsed||e.deleteFromDocument();var k=e.getRangeAt(0);0<a&&(k.setStart(e.focusNode,e.focusOffset-e.focusNode.nodeValue.substr(0,e.focusOffset)._kmwSubstr(-a).length),k.deleteContents());if(0<d._kmwLength())if(3==e.focusNode.nodeType){k=e.focusOffset;e.focusNode.insertData(e.focusOffset,d);try{e.extend(e.focusNode,k+d.length)}catch(l){e.focusNode.parentNode.scrollIntoView(),e.extend(e.focusNode,
k+d.length)}}else{var n=c.createTextNode(d);k.insertNode(n);e.extend(n,d.length)}h&&b._CacheCommandsReset(c,j,null);e.collapseToEnd();0<=a&&(b._DeadkeyDeleteMatched(),b._DeadkeyAdjustPos(g,-a+d._kmwLength()))}else if(c&&(e=c.selection)){if(c.body.isContentEditable||"on"==c.designMode.toLowerCase())j=b._CacheCommands(c);k=e.createRange();""!=k.text?(e.clear(),a=0):k.collapse(!0);0<a?(k.moveStart("character",-2*a),h=k.text._kmwSubstr(-a),k.collapse(!1),k.moveStart("character",-h.length)):a=0;k.text=
d;if(c.body.isContentEditable||"on"==c.designMode.toLowerCase())k.moveStart("character",-d.length),b._CacheCommandsReset(c,j,k.select),k.moveStart("character",d.length),k.select();0<=a&&(b._DeadkeyDeleteMatched(),b._DeadkeyAdjustPos(g,-a+d._kmwLength()));b._Selection=e.createRange();b._Selection.select();b._Selection.scrollIntoView()}else f.setSelectionRange&&(null!=f._KeymanWebSelectionStart?(g=f._KeymanWebSelectionStart,c=f._KeymanWebSelectionEnd):(g=f.value._kmwCodeUnitToCodePoint(f.selectionStart),
c=f.value._kmwCodeUnitToCodePoint(f.selectionEnd)),"textarea"==f.type.toLowerCase()&&"undefined"!=typeof f.scrollTop&&(h=f.scrollTop,k=f.scrollLeft),0>a?(f.value=f.value._kmwSubstring(0,g)+d+f.value._kmwSubstring(c),a=0):f.value=g<a?d+f.value._kmwSubstring(c):f.value._kmwSubstring(0,g-a)+d+f.value._kmwSubstring(c),0<=a&&(b._DeadkeyDeleteMatched(),b._DeadkeyAdjustPos(g,-a+d._kmwLength())),"undefined"!=typeof h&&(f.scrollTop=h,f.scrollLeft=k),a=g-a+d._kmwLength(),a=f.value._kmwCodePointToCodeUnit(a),
f.setSelectionRange(a,a),f._KeymanWebSelectionStart=null,f._KeymanWebSelectionEnd=null);if("ontextchange"in b)b.ontextchange(f)}};b.KDO=b.KDO=function(a,f,d){b.cachedContext.reset();var c={};0<=a&&b.KO(a,f,"");c.p=b._SelPos(f);c.d=d;b._DeadKeys=b._push(b._DeadKeys,c)};b.KIO=b.KIO=function(a,f,d,c){b.cachedContext.reset();b._AnyIndices[d-1]<f._kmwLength()&&b.KO(a,c,f._kmwCharAt(b._AnyIndices[d-1]))};b._CacheCommands=function(a){var f=[["backcolor",1],["fontname",1],["fontsize",1],["forecolor",1],["bold",
0],["italic",0],["strikethrough",0],["subscript",0],["superscript",0],["underline",0]];a.defaultView&&b._push(f,["hilitecolor",1]);for(var d=0;d<f.length;d++)b._push(f[d],f[d][1]?a.queryCommandValue(f[d][0]):a.queryCommandState(f[d][0]));return f};b._CacheCommandsReset=function(a,b,d){for(var c=0;c<b.length;c++)b[c][1]?a.queryCommandValue(b[c][0])!=b[c][2]&&(d&&d(),a.execCommand(b[c][0],!1,b[c][2])):a.queryCommandState(b[c][0])!=b[c][2]&&(d&&d(),a.execCommand(b[c][0],!1,null))};b.KIFS=b.KIFS=function(a,
f){var d=!0;if(a==b.TSS_LAYER)d=j.layerId===f;else if(a==b.TSS_PLATFORM){var c,e,g=f.split(" ");for(c=0;c<g.length;c++){e=g[c].toLowerCase();switch(e){case "touch":case "hardware":l.touchable!=("touch"==e)&&(d=!1)}switch(e){case "windows":case "android":case "ios":case "macosx":case "linux":l.OS.toLowerCase()!=e&&(d=!1)}switch(e){case "tablet":case "phone":case "desktop":l.formFactor!=e&&(d=!1)}switch(e){case "native":case "web":case "ie":case "chrome":case "firefox":case "safari":case "opera":l.browser!=
e&&(d=!1)}}}return d};b.KSETS=function(a,f){b.cachedContext.reset();return a==b.TSS_LAYER?j.showLayer(f):!1};b.KLOAD=function(a,f,d){b.cachedContext.reset();a=h.loadCookie("KeymanWeb_"+a+"_Option_"+f);return"undefined"!=typeof a[f]?unescape(a[f]):d};b.KSAVE=function(a,f){b.cachedContext.reset();var d=b._ActiveKeyboard;if(!d||"undefined"==typeof d.KI||""==d.KI)return!1;var d="KeymanWeb_"+d.KI+"_Option_"+a,c=escape(f);h.saveCookie(d,c);return!0};b.GetLastActiveElement=function(){return b._LastActiveElement};
b.FocusLastActiveElement=function(){b._FocusLastActiveElement()};b.HideHelp=function(){j._Hide(!0)};b.ShowHelp=function(a,b){j._Show(a,b)};b.ShowPinnedHelp=function(){j.userPositioned=!0;j._Show(-1,-1)};b.cachedContext={_cache:[],reset:function(){this._cache=[]},get:function(a,b){return"undefined"==typeof this._cache[a]||"undefined"==typeof this._cache[a][b]?null:this._cache[a][b]},set:function(a,b,d){"undefined"==typeof this._cache[a]&&(this._cache[a]=[]);this._cache[a][b]=d}}})();(function(){var b=window.tavultesoft.keymanweb,h=b._VKMap_FF_IE={};h.k61=187;h.k59=186;b._VKMap_Opera_IE={};b._VKMap_Safari_IE={};h=b._VKMap={};h.se={};h.se.k220=192;h.se.k187=189;h.se.k219=187;h.se.k221=219;h.se.k186=221;h.se.k191=220;h.se.k192=186;h.se.k189=191;h.uk={};h.uk.k223=192;h.uk.k192=222;h.uk.k222=226;h.uk.k220=220;var h={},j={};h.k192=96;h.k49=49;h.k50=50;h.k51=51;h.k52=52;h.k53=53;h.k54=54;h.k55=55;h.k56=56;h.k57=57;h.k48=48;h.k189=45;h.k187=61;h.k81=113;h.k87=119;h.k69=101;h.k82=114;
h.k84=116;h.k89=121;h.k85=117;h.k73=105;h.k79=111;h.k80=112;h.k219=91;h.k221=93;h.k220=92;h.k65=97;h.k83=115;h.k68=100;h.k70=102;h.k71=103;h.k72=104;h.k74=106;h.k75=107;h.k76=108;h.k186=59;h.k222=39;h.k90=122;h.k88=120;h.k67=99;h.k86=118;h.k66=98;h.k78=110;h.k77=109;h.k188=44;h.k190=46;h.k191=47;j.k192=126;j.k49=33;j.k50=64;j.k51=35;j.k52=36;j.k53=37;j.k54=94;j.k55=38;j.k56=42;j.k57=40;j.k48=41;j.k189=95;j.k187=43;j.k81=81;j.k87=87;j.k69=69;j.k82=82;j.k84=84;j.k89=89;j.k85=85;j.k73=73;j.k79=79;j.k80=
80;j.k219=123;j.k221=125;j.k220=124;j.k65=65;j.k83=83;j.k68=68;j.k70=70;j.k71=71;j.k72=72;j.k74=74;j.k75=75;j.k76=76;j.k186=58;j.k222=34;j.k90=90;j.k88=88;j.k67=67;j.k86=86;j.k66=66;j.k78=78;j.k77=77;j.k188=60;j.k190=62;j.k191=63;b._USCharCode=[h,j];b._USKeyCodeToCharCode=function(h){return b._USCharCode[h.Lmodifiers&16?1:0]["k"+h.Lcode]}})();window.dfltLayout={desktop:{font:"Tahoma",layer:[{id:"default",row:[{id:"1",key:[{id:"K_BKQUOTE"},{id:"K_1"},{id:"K_2"},{id:"K_3"},{id:"K_4"},{id:"K_5"},{id:"K_6"},{id:"K_7"},{id:"K_8"},{id:"K_9"},{id:"K_0"},{id:"K_HYPHEN"},{id:"K_EQUAL"},{id:"K_BKSP",text:"*BkSp*",sp:"1",width:"130"}]},{id:"2",key:[{id:"K_TAB",text:"*Tab*",sp:"1",width:"130"},{id:"K_Q"},{id:"K_W"},{id:"K_E"},{id:"K_R"},{id:"K_T"},{id:"K_Y"},{id:"K_U"},{id:"K_I"},{id:"K_O"},{id:"K_P"},{id:"K_LBRKT"},{id:"K_RBRKT"},{id:"K_BKSLASH"}]},
{id:"3",key:[{id:"K_CAPS",text:"*Caps*",sp:"1",width:"165"},{id:"K_A"},{id:"K_S"},{id:"K_D"},{id:"K_F"},{id:"K_G"},{id:"K_H"},{id:"K_J"},{id:"K_K"},{id:"K_L"},{id:"K_COLON"},{id:"K_QUOTE"},{id:"K_ENTER",text:"*Enter*",sp:"1",width:"165"}]},{id:"4",key:[{id:"K_SHIFT",text:"*Shift*",sp:"1",width:"130"},{id:"K_oE2"},{id:"K_Z"},{id:"K_X"},{id:"K_C"},{id:"K_V"},{id:"K_B"},{id:"K_N"},{id:"K_M"},{id:"K_COMMA"},{id:"K_PERIOD"},{id:"K_SLASH"},{id:"K_RSHIFT",text:"*Shift*",sp:"1",width:"130"}]},{id:"5",key:[{id:"K_LCONTROL",
text:"*Ctrl*",sp:"1",width:"170"},{id:"K_LALT",text:"*Alt*",sp:"1",width:"160"},{id:"K_SPACE",text:"",width:"770"},{id:"K_ALT",text:"*Alt*",sp:"1",width:"160"},{id:"K_RCONTROL",text:"*Ctrl*",sp:"1",width:"170"}]}]}]},tablet:{font:"Tahoma",layer:[{id:"default",row:[{id:"0",key:[{id:"K_1"},{id:"K_2"},{id:"K_3"},{id:"K_4"},{id:"K_5"},{id:"K_6"},{id:"K_7"},{id:"K_8"},{id:"K_9"},{id:"K_0"},{id:"K_HYPHEN"},{id:"K_EQUAL"},{sp:"10",width:"1"}]},{id:"1",key:[{id:"K_Q",pad:"25"},{id:"K_W"},{id:"K_E"},{id:"K_R"},
{id:"K_T"},{id:"K_Y"},{id:"K_U"},{id:"K_I"},{id:"K_O"},{id:"K_P"},{id:"K_LBRKT"},{id:"K_RBRKT"},{sp:"10",width:"1"}]},{id:"2",key:[{id:"K_A",pad:"50"},{id:"K_S"},{id:"K_D"},{id:"K_F"},{id:"K_G"},{id:"K_H"},{id:"K_J"},{id:"K_K"},{id:"K_L"},{id:"K_COLON"},{id:"K_QUOTE"},{id:"K_BKSLASH",width:"90"}]},{id:"3",key:[{id:"K_oE2",width:"90"},{id:"K_Z"},{id:"K_X"},{id:"K_C"},{id:"K_V"},{id:"K_B"},{id:"K_N"},{id:"K_M"},{id:"K_COMMA"},{id:"K_PERIOD"},{id:"K_SLASH"},{id:"K_BKQUOTE"},{sp:"10",width:"1"}]},{id:"4",
key:[{id:"K_SHIFT",text:"*Shift*",sp:"1",width:"140",sk:[{id:"K_LCONTROL",text:"*Ctrl*",sp:"1",width:"50",nextlayer:"ctrl"},{id:"K_LALT",text:"*Alt*",sp:"1",width:"50",nextlayer:"alt"},{id:"K_ALTGR",text:"*AltGr*",sp:"1",width:"50",nextlayer:"ctrlalt"}]},{id:"K_LOPT",text:"*Menu*",sp:"1",width:"120"},{id:"K_TAB",text:"*Tab*",sp:"1",width:"120"},{id:"K_SPACE",text:"",width:"500"},{id:"K_BKSP",text:"*BkSp*",sp:"1",width:"120"},{id:"K_ROPT",text:"*Hide*",sp:"1",width:"120"},{id:"K_ENTER",text:"*Enter*",
sp:"1",width:"120"}]}]}]},phone:{font:"Tahoma",layer:[{id:"default",row:[{id:"0",key:[{id:"K_1"},{id:"K_2"},{id:"K_3"},{id:"K_4"},{id:"K_5"},{id:"K_6"},{id:"K_7"},{id:"K_8"},{id:"K_9"},{id:"K_0"},{id:"K_HYPHEN"},{id:"K_EQUAL"},{sp:"10",width:"1"}]},{id:"1",key:[{id:"K_Q",pad:"25"},{id:"K_W"},{id:"K_E"},{id:"K_R"},{id:"K_T"},{id:"K_Y"},{id:"K_U"},{id:"K_I"},{id:"K_O"},{id:"K_P"},{id:"K_LBRKT"},{id:"K_RBRKT"},{sp:"10",width:"1"}]},{id:"2",key:[{id:"K_A",pad:"50"},{id:"K_S"},{id:"K_D"},{id:"K_F"},{id:"K_G"},
{id:"K_H"},{id:"K_J"},{id:"K_K"},{id:"K_L"},{id:"K_COLON"},{id:"K_QUOTE"},{id:"K_BKSLASH",width:"90"}]},{id:"3",key:[{id:"K_oE2",width:"90"},{id:"K_Z"},{id:"K_X"},{id:"K_C"},{id:"K_V"},{id:"K_B"},{id:"K_N"},{id:"K_M"},{id:"K_COMMA"},{id:"K_PERIOD"},{id:"K_SLASH"},{id:"K_BKQUOTE"},{sp:"10",width:"1"}]},{id:"4",key:[{id:"K_SHIFT",text:"*Shift*",sp:"1",width:"140",sk:[{id:"K_LCONTROL",text:"*Ctrl*",sp:"1",width:"50",nextlayer:"ctrl"},{id:"K_LALT",text:"*Alt*",sp:"1",width:"50",nextlayer:"alt"},{id:"K_ALTGR",
text:"*AltGr*",sp:"1",width:"50",nextlayer:"ctrlalt"}]},{id:"K_LOPT",text:"*Menu*",width:"120",sp:"1"},{id:"K_TAB",text:"*Tab*",width:"120",sp:"1"},{id:"K_SPACE",width:"500",text:""},{id:"K_BKSP",text:"*BkSp*",width:"120",sp:"1"},{id:"K_ROPT",text:"*Hide*",width:"120",sp:"1"},{id:"K_ENTER",text:"*Enter*",width:"120",sp:"1"}]}]}]}};(function(){var b=window.tavultesoft.keymanweb;if("complete"===document.readyState)b.init(null);else var h=window.setInterval(function(){"complete"===document.readyState&&(window.clearInterval(h),b.init(null))},10)})();
